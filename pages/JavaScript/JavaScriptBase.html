<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.51" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://molimamcc.github.io/MyBlog/MyBlog/pages/JavaScript/JavaScriptBase.html"><meta property="og:site_name" content="前端博客"><meta property="og:title" content="JavaScript基础"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><link rel="icon" href="/MyBlog/favicon.ico"><link rel="icon" href="/MyBlog/assets/icon/chrome-mask-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/MyBlog/assets/icon/chrome-mask-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/MyBlog/assets/icon/chrome-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/MyBlog/assets/icon/chrome-192.png" type="image/png" sizes="192x192"><link rel="manifest" href="/MyBlog/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/MyBlog/assets/icon/apple-icon-152.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/MyBlog/assets/icon/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>JavaScript基础 | 前端博客</title><meta name="description" content="vuepress-theme-hope 的前端博客">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/MyBlog/assets/style.d0c8f9cc.css">
    <link rel="modulepreload" href="/MyBlog/assets/app.965a661c.js"><link rel="modulepreload" href="/MyBlog/assets/JavaScriptBase.html.c1ac6b05.js"><link rel="modulepreload" href="/MyBlog/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/MyBlog/assets/JavaScriptBase.html.98a2335d.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/MyBlog/" class="brand"><img class="logo" src="/MyBlog/logo.svg" alt="前端博客"><!----><span class="site-name hide-in-pad">前端博客</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/MyBlog/" class="nav-link" aria-label="蘑力码"><span class="icon iconfont icon-home"></span>蘑力码<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="计算机基础"><span class="title"><span class="icon iconfont icon-edit"></span>计算机基础</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/MyBlog/pages/ComputerBase/IADS.html" class="nav-link" aria-label="算法与数据结构"><span class="icon iconfont icon-edit"></span>算法与数据结构<!----></a></li><li class="dropdown-item"><a href="/MyBlog/pages/ComputerBase/ComputerNetwork.html" class="nav-link" aria-label="计算机网络"><span class="icon iconfont icon-edit"></span>计算机网络<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="HTML5"><span class="title"><span class="icon iconfont icon-html"></span>HTML5</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/MyBlog/pages/HTML/HTMLBase" class="nav-link" aria-label="HTML基础"><span class="icon iconfont icon-edit"></span>HTML基础<!----></a></li><li class="dropdown-item"><a href="/MyBlog/pages/HTML/HTML5" class="nav-link" aria-label="HTML5新特性"><span class="icon iconfont icon-edit"></span>HTML5新特性<!----></a></li><li class="dropdown-item"><a href="/MyBlog/pages/HTML/AJAX" class="nav-link" aria-label="AJAX"><span class="icon iconfont icon-ajax"></span>AJAX<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="CSS3"><span class="title"><span class="icon iconfont icon-css"></span>CSS3</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/MyBlog/pages/CSS3/CSS.html" class="nav-link" aria-label="CSS基础"><span class="icon iconfont icon-css"></span>CSS基础<!----></a></li><li class="dropdown-item"><a href="/MyBlog/pages/CSS3/Layout.html" class="nav-link" aria-label="CSS布局"><span class="icon iconfont icon-edit"></span>CSS布局<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="JavaScript"><span class="title"><span class="icon iconfont icon-javascript"></span>JavaScript</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-current="page" href="/MyBlog/pages/JavaScript/JavaScriptBase.html" class="router-link-active router-link-exact-active nav-link active" aria-label="JavaScript基础"><span class="icon iconfont icon-edit"></span>JavaScript基础<!----></a></li><li class="dropdown-item"><a href="/MyBlog/pages/JavaScript/DOM%E4%B8%8EBOM.html" class="nav-link" aria-label="DOM与BOM"><span class="icon iconfont icon-edit"></span>DOM与BOM<!----></a></li><li class="dropdown-item"><a href="/MyBlog/pages/JavaScript/ES6.html" class="nav-link" aria-label="ES6入门"><span class="icon iconfont icon-es6"></span>ES6入门<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="VUE"><span class="title"><span class="icon iconfont icon-vue"></span>VUE</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/MyBlog/pages/VUE/VUE2.html" class="nav-link" aria-label="Vue2.x"><span class="icon iconfont icon-vue"></span>Vue2.x<!----></a></li><li class="dropdown-item"><a href="/MyBlog/pages/VUE/VUE3.html" class="nav-link" aria-label="Vue3.x"><span class="icon iconfont icon-vue"></span>Vue3.x<!----></a></li><li class="dropdown-item"><a href="/MyBlog/pages/VUE/VUEPrinciple.html" class="nav-link" aria-label="Vue原理"><span class="icon iconfont icon-vue"></span>Vue原理<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="uni-app"><span class="title"><span class="icon iconfont icon-app"></span>uni-app</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/MyBlog/pages/puni-app/MinisApp" class="nav-link" aria-label="小程序"><span class="icon iconfont icon-edit"></span>小程序<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="构建工具"><span class="title"><span class="icon iconfont icon-build"></span>构建工具</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/MyBlog/pages/BuildTools/NPM.html" class="nav-link" aria-label="NPM包管理"><span class="icon iconfont icon-edit"></span>NPM包管理<!----></a></li><li class="dropdown-item"><a href="/MyBlog/pages/BuildTools/Git.html" class="nav-link" aria-label="Git"><span class="icon iconfont icon-git"></span>Git<!----></a></li><li class="dropdown-item"><a href="/MyBlog/pages/BuildTools/webpack.html" class="nav-link" aria-label="webpack"><span class="icon iconfont icon-edit"></span>webpack<!----></a></li><li class="dropdown-item"><a href="/MyBlog/pages/BuildTools/Vite.html" class="nav-link" aria-label="Vite"><span class="icon iconfont icon-edit"></span>Vite<!----></a></li><li class="dropdown-item"><a href="/MyBlog/pages/BuildTools/EngineeringDevelopment.html" class="nav-link" aria-label="前端工程化"><span class="icon iconfont icon-edit"></span>前端工程化<!----></a></li></ul></button></div></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!----><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note"></span><span class="title">计算机基础</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note"></span><span class="title">HTML5</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note"></span><span class="title">CSS3</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-note"></span><span class="title">JavaScript</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/MyBlog/pages/JavaScript/DOM%E4%B8%8EBOM.html" class="nav-link sidebar-link sidebar-page" aria-label="Web APIs"><!---->Web APIs<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/MyBlog/pages/JavaScript/JavaScriptBase.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="JavaScript基础"><!---->JavaScript基础<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/MyBlog/pages/JavaScript/JavaScriptBase.html#数据-变量-内存的理解" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="数据/变量/内存的理解"><!---->数据/变量/内存的理解<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/MyBlog/pages/JavaScript/JavaScriptBase.html#面向对象高级" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="面向对象高级"><!---->面向对象高级<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/MyBlog/pages/JavaScript/JavaScriptBase.html#es5新增方法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ES5新增方法"><!---->ES5新增方法<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/MyBlog/pages/JavaScript/JavaScriptBase.html#线程机制与事件机制" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="线程机制与事件机制"><!---->线程机制与事件机制<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/MyBlog/pages/JavaScript/JavaScriptBase.html#web-workers" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Web Workers"><!---->Web Workers<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/MyBlog/pages/JavaScript/ES6.html" class="nav-link sidebar-link sidebar-page" aria-label="ES6-ES11"><!---->ES6-ES11<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note"></span><span class="title">VUE</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note"></span><span class="title">uni-app</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note"></span><span class="title">构建工具</span><span class="arrow right"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->JavaScript基础</h1><div class="page-info"><span class="author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://molimamcc.github.io/" target="_blank" rel="noopener noreferrer">MolimaMCc</a></span><span property="author" content="MolimaMCc"></span></span><!----><!----><!----><!----><span class="reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 73 分钟</span><meta property="timeRequired" content="PT73M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/MyBlog/pages/JavaScript/JavaScriptBase.html#数据-变量-内存的理解" class="router-link-active router-link-exact-active toc-link level3">数据/变量/内存的理解</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/MyBlog/pages/JavaScript/JavaScriptBase.html#面向对象高级" class="router-link-active router-link-exact-active toc-link level3">面向对象高级</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/MyBlog/pages/JavaScript/JavaScriptBase.html#es5新增方法" class="router-link-active router-link-exact-active toc-link level3">ES5新增方法</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/MyBlog/pages/JavaScript/JavaScriptBase.html#线程机制与事件机制" class="router-link-active router-link-exact-active toc-link level3">线程机制与事件机制</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/MyBlog/pages/JavaScript/JavaScriptBase.html#web-workers" class="router-link-active router-link-exact-active toc-link level3">Web Workers</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="javascript基础" tabindex="-1"><a class="header-anchor" href="#javascript基础" aria-hidden="true">#</a> JavaScript基础</h1><p>###数据类型</p><p>####分类</p><p><strong>基本类型：</strong></p><ol><li>String：任意字符串</li><li>Number：任意数字</li><li>boolean：ture/false</li><li>undefined：undefined</li><li>null：null[^使用typeof时返回object]</li><li><a href="https://gitee.com/link?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FGlossary%2FSymbol" target="_blank" rel="noopener noreferrer">symbol<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> (<a href="https://gitee.com/link?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FGlossary%2FECMAScript" target="_blank" rel="noopener noreferrer">ECMAScript<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 2016新增)。 --&gt;Symbol 是基本数据类型的一种，Symbol对象是 Symbol原始值的封装。</li><li>bigint：BigInt是一种数字型的数据，它可以表示任意精度格式的整数。</li></ol><p>加上对象类型，目前Javascript共八种数据类型</p><p><strong>引用类型</strong>：</p><p>Object：任意对象</p><p>Function：一种特别的对象（可以执行）内含可执行代码块</p><p>Array：一种特别的对象（数值下表，内部数据有序的）</p><p>####判断数据类型：</p><p>#####typeof</p><ul><li><p><strong><code>typeof</code></strong> 操作符返回一个<code>字符串</code>，表示未经计算的操作数的类型。</p></li><li><p>可以判断undefined/数值型/字符串/布尔值/function</p></li><li><p>不能判断：null与object，object与array</p></li><li><p>代码表示</p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token comment">//注意:typeof返回的是字符串</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token keyword">typeof</span> a<span class="token punctuation">,</span> <span class="token keyword">typeof</span> a<span class="token operator">===</span><span class="token string">&#39;undefined&#39;</span><span class="token punctuation">,</span>a<span class="token operator">===</span><span class="token keyword">undefined</span> <span class="token punctuation">)</span>  <span class="token comment">// undefined &#39;undefined&#39; true true</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">undefined</span> <span class="token operator">===</span> <span class="token string">&#39;undefined&#39;</span><span class="token punctuation">)</span> <span class="token comment">//false</span>
  a <span class="token operator">=</span> <span class="token number">4</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> a<span class="token operator">===</span><span class="token string">&#39;number&#39;</span><span class="token punctuation">)</span> <span class="token comment">//true</span>
  a <span class="token operator">=</span> <span class="token string">&#39;hongjilin&#39;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> a<span class="token operator">===</span><span class="token string">&#39;string&#39;</span><span class="token punctuation">)</span> <span class="token comment">//true</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> a<span class="token operator">===</span><span class="token string">&#39;String&#39;</span><span class="token punctuation">)</span> <span class="token comment">//false  --&gt;注意,返回的类型为小写</span>
  a <span class="token operator">=</span> <span class="token boolean">true</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> a<span class="token operator">===</span><span class="token string">&#39;boolean&#39;</span><span class="token punctuation">)</span> <span class="token comment">//true</span>
  a <span class="token operator">=</span> <span class="token keyword">null</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> a<span class="token punctuation">,</span> a<span class="token operator">===</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// &#39;object&#39;  true</span>
 <span class="token keyword">let</span> b<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> b<span class="token punctuation">,</span><span class="token keyword">typeof</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&#39;-------&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &#39;object&#39; &#39;object&#39;  --&gt;所以Typeof不能判断null与object</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>#####instanceof(判断实例方法)</p><ul><li>判断对象的具体类型</li><li><strong>instanceof</strong> <strong>运算符</strong>用于检测构造函数的 prototype 属性是否出现在某个实例对象的原型链上</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">var</span> b1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">b2</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;abc&#39;</span><span class="token punctuation">,</span> console<span class="token punctuation">.</span>log<span class="token punctuation">]</span><span class="token punctuation">,</span>
 <span class="token comment">//可以简化成 b3:()=&gt;()=&gt; &#39;hongjilin&#39;  --&gt;高阶函数相关知识</span>
    <span class="token function-variable function">b3</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span>  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>  <span class="token keyword">return</span>   <span class="token string">&#39;hongjilin&#39;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
 <span class="token doc-comment comment">/**使用instanceof进行对象判断*/</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b1 <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">,</span> b1 <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token comment">// true  false</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b1<span class="token punctuation">.</span>b2 <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">,</span> b1<span class="token punctuation">.</span>b2 <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token comment">// true true</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b1<span class="token punctuation">.</span>b3 <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">,</span> b1<span class="token punctuation">.</span>b3 <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token comment">// true true</span>

  <span class="token doc-comment comment">/**使用typeof进行对象中某属性的判断*/</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> b1<span class="token punctuation">.</span>b2<span class="token punctuation">,</span> <span class="token keyword">typeof</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// &#39;object&#39; &#39;object&#39;  </span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> b1<span class="token punctuation">.</span>b3<span class="token operator">===</span><span class="token string">&#39;function&#39;</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> b1<span class="token punctuation">.</span>b2<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">===</span><span class="token string">&#39;function&#39;</span><span class="token punctuation">)</span> <span class="token comment">//true</span>

  <span class="token doc-comment comment">/**调用对象与数组中某函数示例*/</span>
  b1<span class="token punctuation">.</span>b2<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">&#39;调用console.log打印hongjilin&#39;</span><span class="token punctuation">)</span>    <span class="token comment">//调用console.log打印hongjilin</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b1<span class="token punctuation">.</span><span class="token function">b3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// hongjilin</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="" tabindex="-1"><a class="header-anchor" href="#" aria-hidden="true">#</a> ===</h5><p>具体可以看 MDN的<a href="https://gitee.com/link?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FEquality_comparisons_and_sameness" target="_blank" rel="noopener noreferrer">JavaScript中的相等性判断<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>可以判断: undefined, null</p><p>简而言之，在比较两件事情时，<code>双等号将执行类型转换</code>;<code> 三等号将进行相同的比较，而不进行类型转换</code> (如果类型不同, 只是总会返回 false )</p><h5 id="相关问题" tabindex="-1"><a class="header-anchor" href="#相关问题" aria-hidden="true">#</a> 相关问题</h5><p><strong>1.undefined与null的区别?</strong></p><ul><li>undefined代表定义未赋值</li><li>nulll定义并赋值了, 只是值为null</li><li>代码实例</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">var</span> a
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>  <span class="token comment">// undefined</span>
  a <span class="token operator">=</span> <span class="token keyword">null</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// null</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2.什么时候给变量赋值为null呢?</strong></p><ul><li>初始赋值, 表明将要赋值为对象,<code>可以用做约定俗成的占位符</code></li><li>结束前, 让对象成为垃圾对象(被垃圾回收器回收)</li><li>代码示例</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token comment">//起始,可以用做约定俗成的占位符</span>
  <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token keyword">null</span>  <span class="token comment">// 初始赋值为null, 表明将要赋值为对象</span>
  <span class="token comment">//确定对象就赋值</span>
  b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;atguigu&#39;</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span>
  <span class="token comment">//最后在不使用的时候,将其引用置空,就可以释放b这个对象占用的内存      ---当没有引用指向它的对象称为垃圾对象</span>
  b <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">// 让b指向的对象成为垃圾对象(被垃圾回收器回收)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3.严格区别变量类型与数据类型?</strong></p><ul><li><p>数据的类型</p><ul><li><p>基本类型</p></li><li><p>对象类型</p></li></ul></li><li><p>变量的类型(变量内存值的类型)</p><ul><li><p>基本类型: 保存就是<code>基本类型</code>的数据</p></li><li><p>引用类型: 保存的是地址值(对象类型)</p></li></ul></li></ul><p>#####补充知识点：</p><p>符串对比*<code>&gt;</code>、<code>&lt;</code>*以及charCodeAt()方法</p><ol><li>Javascript字符串在进行大于(小于)比较时，会根据第一个不同的字符的ascii值码进行比较，当数字(number)与字符串(string)进行比较大小时，会强制的将数字(number)转换成字符串(string)然后再进行比较</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;13&#39;</span><span class="token operator">&gt;</span><span class="token string">&#39;3&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：false</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token operator">&gt;</span><span class="token string">&#39;6&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 输出： false</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;d&#39;</span><span class="token operator">&gt;</span><span class="token string">&#39;ABDC&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 输出： true</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">19</span><span class="token operator">&gt;</span><span class="token string">&#39;ssf&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 输出 false</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;A&#39;</span><span class="token operator">&gt;</span><span class="token string">&#39;abcdef&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 输出 false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2.手动转换为ascii后相减,用正负数表示大小</p><p><code>sorter={(a:string,b:string)=&gt; a.charCodeAt()-b.charCodeAt()}</code></p><hr><h3 id="数据-变量-内存的理解" tabindex="-1"><a class="header-anchor" href="#数据-变量-内存的理解" aria-hidden="true">#</a> 数据/变量/内存的理解</h3><p>####什么时数据？</p><ol><li>存储在内存中代表特定信息的&#39;东西&#39;, 本质上是0101...</li><li>数据的特点: <code>可传递</code>, <code>可运算</code> --&gt;let a=0;b=a 🔜体现可传递</li><li>一切皆数据</li><li>内存中所有操作的目标: 数据</li></ol><ul><li>算术运算</li><li>逻辑运算</li><li>赋值</li><li>运行函数</li></ul><h4 id="什么是内存" tabindex="-1"><a class="header-anchor" href="#什么是内存" aria-hidden="true">#</a> 什么是内存？</h4><ol><li><p>内存条通电后产生的可储存数据的空间(临时的)</p></li><li><p>内存产生和死亡: 内存条(电路版)<mark>&gt;通电</mark>&gt;产生内存空间==&gt;存储数据==&gt;处理数据==&gt;断电==&gt;内存空间和数据都消失</p></li><li><p>一块小内存的2个数据</p><ul><li>内部存储的数据</li><li>地址值</li></ul></li><li><p>内存分类</p><ul><li>栈: 全局变量/局部变量</li><li>堆: 对象</li></ul></li></ol><h4 id="什么是变量" tabindex="-1"><a class="header-anchor" href="#什么是变量" aria-hidden="true">#</a> 什么是变量？</h4><ul><li>可变化的量, 由变量名和变量值组成</li><li>每个变量都对应的一块小内存, 变量名用来查找对应的内存, 变量值就是内存中保存的数据</li></ul><p>ps:变量<code>obj.xx</code>--&gt;<code>.</code>相当于拿着地址找到后面对应的内存,所以只有当我变量中存的是地址,才可以用<code>.</code></p><h4 id="内存-数据-变量三者之间的关系" tabindex="-1"><a class="header-anchor" href="#内存-数据-变量三者之间的关系" aria-hidden="true">#</a> 内存,数据, 变量三者之间的关系</h4><ul><li>内存用来存储数据的空间</li><li>变量是内存的标识</li></ul><h4 id="相关问题引出" tabindex="-1"><a class="header-anchor" href="#相关问题引出" aria-hidden="true">#</a> 相关问题引出</h4><p><strong>关于赋值和内存的问题</strong></p><p>let a = xxx, a内存中到底保存的是什么?</p><ul><li>xxx是基本数据, 保存的就是这个数据</li><li>xxx是对象, 保存的是对象的地址值</li><li>xxx是一个变量, 保存的xxx的内存内容(可能是基本数据, 也可能是地址值)</li></ul><p><strong>关于引用变量赋值问题</strong></p><ul><li><p>2个引用变量指向同一个对象, 通过一个变量修改对象内部数据, 另一个变量看到的是修改之后的数据</p></li><li><p>2个引用变量指向同一个对象, 让其中一个引用变量指向另一个对象, 另一引用变量依然指向前一个对象</p></li><li><p>代码示例:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">}</span>
<span class="token comment">//此时是将a指向的地址值赋值给B,所以B此时也指向{age:12}这个内存</span>
  <span class="token keyword">let</span> b <span class="token operator">=</span> a
<span class="token comment">//此时重新创建了一个内存并让a指向它,所以此处a指向的是{name:&#39;hong&#39;},而b指向仍是刚开始的指向{age:12}</span>
  a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;hong&#39;</span><span class="token punctuation">}</span>
<span class="token comment">//此时a与b指向的内存已经不一样了,所以修改互不影响</span>
  b<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">14</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>age<span class="token punctuation">,</span> a<span class="token punctuation">.</span>name<span class="token punctuation">,</span> a<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// 14 hong undefined</span>
  <span class="token comment">//2个引用变量指向同一个对象, 让其中一个引用变量指向另一个对象, 另一引用变量依然指向前一个对象   --&gt;所以 a 仍是  {name: &#39;hong&#39;}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">fn2</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">}</span>
  <span class="token function">fn2</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">//undefined </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><strong>在js调用函数时传递变量参数时, 是值传递还是引用传递</strong></p><ul><li><p>理解1: 都是值(基本/地址值)传递</p></li><li><p>所以实际上传进function中的参数也是拿着其存着的地址值找内存</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//传进来的obj存储的是a中存的地址值,所以obj==a(因为他们地址值一致,指向一致)</span>
<span class="token comment">//2个引用变量指向同一个对象, 通过一个变量修改对象内部数据, 另一个变量看到的是修改之后的数据  --&gt;所以被进行了修改</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;hong&#39;</span><span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">fn2</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> obj<span class="token punctuation">.</span>age<span class="token operator">=</span> <span class="token number">15</span>
  <span class="token function">fn2</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">//15</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>理解2: 可能是值传递, 也可能是引用传递(地址值)</p></li></ul><p><strong>JS引擎如何管理内存?</strong></p><ol><li>内存生命周期</li></ol><ul><li>分配小内存空间, 得到它的使用权</li><li>存储数据, 可以反复进行操作</li><li>释放小内存空间</li></ul><ol start="2"><li>释放内存</li></ol><ul><li>局部变量: 函数执行完自动释放</li><li>对象: 成为垃圾对象==&gt;垃圾回收器回收</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">3</span>
 <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;hong&quot;</span><span class="token punctuation">}</span>
 obj <span class="token operator">=</span> <span class="token keyword">undefined</span> <span class="token operator">||</span><span class="token keyword">null</span>  <span class="token comment">//此时,obj没有被释放,但是之前声明的`{name:&quot;hong&quot;}`由于没有人指向它,会在后面你某个时刻被垃圾回收器回收</span>

<span class="token keyword">function</span> <span class="token function">fn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
 <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// b是自动释放, b所指向的对象是在后面的某个时刻由垃圾回收器回收</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="面向对象高级" tabindex="-1"><a class="header-anchor" href="#面向对象高级" aria-hidden="true">#</a> 面向对象高级</h3><h4 id="概念" tabindex="-1"><a class="header-anchor" href="#概念" aria-hidden="true">#</a> 概念</h4><h5 id="什么是对象" tabindex="-1"><a class="header-anchor" href="#什么是对象" aria-hidden="true">#</a> 什么是对象？</h5><ul><li>多个数据的封装体</li><li>用来保存多个数据的容器</li><li>一个对象代表现实中的一个事物</li></ul><h5 id="为什么使用对象" tabindex="-1"><a class="header-anchor" href="#为什么使用对象" aria-hidden="true">#</a> 为什么使用对象？</h5><ul><li>统一管理多个数据</li></ul><h5 id="对象的组成" tabindex="-1"><a class="header-anchor" href="#对象的组成" aria-hidden="true">#</a> 对象的组成</h5><ul><li>属性: 属性名(字符串)和属性值(任意)组成</li><li>方法: 一种特别的属性(属性值是函数)</li></ul><h5 id="如何访问对象内部数据" tabindex="-1"><a class="header-anchor" href="#如何访问对象内部数据" aria-hidden="true">#</a> 如何访问对象内部数据?</h5><ul><li><code>.属性名</code>: 编码简单, 有时不能用</li><li><code>[&#39;属性名&#39;]</code>: 编码麻烦, 能通用</li></ul><h5 id="什么时候必须使用-属性名-的方式" tabindex="-1"><a class="header-anchor" href="#什么时候必须使用-属性名-的方式" aria-hidden="true">#</a> 什么时候必须使用<code>[&#39;属性名&#39;]</code>的方式</h5><ol><li>属性名包含特殊字符: <code>-</code> <code>空格</code></li><li>属性名不确定</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
 <span class="token comment">//1. 给p对象添加一个属性: content type: text/json</span>
 <span class="token comment">// p.content-type = &#39;text/json&#39; //不能用</span>
 p<span class="token punctuation">[</span><span class="token string">&#39;content-type&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;text/json&#39;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span><span class="token string">&#39;content-type&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

 <span class="token comment">//2. 属性名不确定</span>
 <span class="token keyword">var</span> propName <span class="token operator">=</span> <span class="token string">&#39;myAge&#39;</span>
 <span class="token keyword">var</span> value <span class="token operator">=</span> <span class="token number">18</span>
 <span class="token comment">// p.propName = value //不能用</span>
 p<span class="token punctuation">[</span>propName<span class="token punctuation">]</span> <span class="token operator">=</span> value
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>propName<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="对象的创建模式" tabindex="-1"><a class="header-anchor" href="#对象的创建模式" aria-hidden="true">#</a> 对象的创建模式</h4><h5 id="object构造函数模式" tabindex="-1"><a class="header-anchor" href="#object构造函数模式" aria-hidden="true">#</a> Object构造函数模式</h5><p>方式一: Object构造函数模式</p><ul><li>套路: 先创建空Object对象, 再动态添加属性/方法</li><li>适用场景: 起始时不确定对象内部数据</li><li>问题: 语句太多</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/*一个人: name:&quot;Tom&quot;, age: 12*/</span>
<span class="token comment">// 先创建空Object对象</span>
 <span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 p <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">//此时内部数据是不确定的</span>
 <span class="token comment">// 再动态添加属性/方法</span>
 p<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;Tom&#39;</span>
 p<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">12</span>
 p<span class="token punctuation">.</span><span class="token function-variable function">setName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
 <span class="token punctuation">}</span>

 <span class="token comment">//测试</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">,</span> p<span class="token punctuation">.</span>age<span class="token punctuation">)</span>
 p<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&#39;Bob&#39;</span><span class="token punctuation">)</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">,</span> p<span class="token punctuation">.</span>age<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="对象字面量模式" tabindex="-1"><a class="header-anchor" href="#对象字面量模式" aria-hidden="true">#</a> 对象字面量模式</h5><p>方式二: 对象字面量模式</p><ul><li>套路: 使用{}创建对象, 同时指定属性/方法</li><li>适用场景: 起始时对象内部数据是确定的</li><li>问题: 如果创建多个对象, 有重复代码</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//对象字面量模式</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Tom&#39;</span><span class="token punctuation">,</span>
   <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
   <span class="token function-variable function">setName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
 <span class="token comment">//测试</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">,</span> p<span class="token punctuation">.</span>age<span class="token punctuation">)</span>
 p<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&#39;JACK&#39;</span><span class="token punctuation">)</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">,</span> p<span class="token punctuation">.</span>age<span class="token punctuation">)</span>

 <span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token punctuation">{</span>  <span class="token comment">//如果创建多个对象代码很重复</span>
   <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Bob&#39;</span><span class="token punctuation">,</span>
   <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
   <span class="token function-variable function">setName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="工厂模式" tabindex="-1"><a class="header-anchor" href="#工厂模式" aria-hidden="true">#</a> 工厂模式</h5><p>方式三: 工厂模式</p><ul><li>套路: 通过工厂函数动态创建对象并返回</li><li>适用场景: 需要创建多个对象</li><li>问题: <code>对象没有一个具体的类型</code>, 都是Object类型</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//返回一个对象的函数===&gt;工厂函数</span>
<span class="token keyword">function</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
 <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">name</span><span class="token operator">:</span> name<span class="token punctuation">,</span>
   <span class="token literal-property property">age</span><span class="token operator">:</span> age<span class="token punctuation">,</span>
   <span class="token function-variable function">setName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
 <span class="token keyword">return</span> obj
<span class="token punctuation">}</span>

<span class="token comment">// 创建2个人</span>
<span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token string">&#39;Tom&#39;</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token string">&#39;Bob&#39;</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span>

<span class="token comment">// p1/p2是Object类型</span>

<span class="token keyword">function</span> <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">name</span><span class="token operator">:</span> name<span class="token punctuation">,</span>
   <span class="token literal-property property">price</span><span class="token operator">:</span> price
 <span class="token punctuation">}</span>
 <span class="token keyword">return</span> obj
<span class="token punctuation">}</span>
<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token string">&#39;张三&#39;</span><span class="token punctuation">,</span> <span class="token number">12000</span><span class="token punctuation">)</span>
<span class="token comment">// s也是Object</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="自定义构造函数模式" tabindex="-1"><a class="header-anchor" href="#自定义构造函数模式" aria-hidden="true">#</a> 自定义构造函数模式</h5><p>方式四: 自定义构造函数模式</p><ul><li>套路: 自定义构造函数, 通过new创建对象</li><li>适用场景: 需要创建多个<code>类型确定</code>的对象,与上方工厂模式有所对比</li><li>问题: 每个对象都有相同的数据, 浪费内存</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//定义类型</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
 <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
 <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">setName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&#39;Tom&#39;</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span>
p1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&#39;Jack&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>name<span class="token punctuation">,</span> p1<span class="token punctuation">.</span>age<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1 <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">Student</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
 <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price
<span class="token punctuation">}</span>
<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">&#39;Bob&#39;</span><span class="token punctuation">,</span> <span class="token number">13000</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s <span class="token keyword">instanceof</span> <span class="token class-name">Student</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&#39;JACK&#39;</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="构造函数-原型的组合模式" tabindex="-1"><a class="header-anchor" href="#构造函数-原型的组合模式" aria-hidden="true">#</a> 构造函数+原型的组合模式</h5><p>方式五: 构造函数+原型的组合模式--&gt;<code>最好用这个写法</code></p><ul><li><p>套路: 自定义构造函数, 属性在函数中初始化, 方法添加到原型上</p><ul><li>适用场景: 需要<code>创建多个类型确定</code>的对象</li></ul></li><li><p>放在原型上可以节省空间(只需要加载一遍方法)</p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//在构造函数中只初始化一般函数</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
 <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
 <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>

<span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&#39;Tom&#39;</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&#39;Jack&#39;</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>####类</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Name</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> 
<span class="token comment">//实例化对象</span>
<span class="token keyword">var</span> ltw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>#####类的constructor 构造函数</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Name</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//类中添加共有的方法</span>
    <span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;我唱歌&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> 
<span class="token comment">//实例化对象</span>
<span class="token keyword">var</span> ltw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Name</span><span class="token punctuation">(</span><span class="token string">&#39;ltw&#39;</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//调用方法</span>
ltw<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>(1) 通过class 关键字创建类 类名 我们还是习惯性定义首字母大写 (2) 类里面有个 constructor 函数 可以接受传递过来的参数 同时返回实例对象 (3) constructor 函数 只要 new 生实例时 就会自动调用这个函数 如果我们不写这个函数 类也会自动生成这个函数 (4) 生成实例 new 不能省略 (5) 最后注意语法规范 创建类 类名后面不要加小括号 生成实例 类名后面加小括号 构造函数不需要加 function (6) 类的公有属性放到 constructor 里面 (7) 多个函数方法之间不需要添加逗号分隔</p><h5 id="类的继承" tabindex="-1"><a class="header-anchor" href="#类的继承" aria-hidden="true">#</a> 类的继承</h5><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token keyword">class</span> <span class="token class-name">Father</span><span class="token punctuation">{</span>   <span class="token comment">// 父类</span>
    <span class="token punctuation">}</span> 
 	 <span class="token keyword">class</span>  <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Father</span> <span class="token punctuation">{</span>  <span class="token comment">// 子类继承父类</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="super-调用父类函数" tabindex="-1"><a class="header-anchor" href="#super-调用父类函数" aria-hidden="true">#</a> super 调用父类函数</h5><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Father</span> <span class="token punctuation">{</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&#39;我是爸爸&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Father</span> <span class="token punctuation">{</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// console.log(&#39;我是儿子&#39;);</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;的儿子&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// super.say() 就是调用父类中的普通函数 say()</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>继承中，如果实例化子类输出一个方法，先看子类有没有，如果有就执行，没有就查找父类，父类有就执行（就近原则）</p><p>注意: 子类在构造函数中使用super, 必须放到 this 前面 (必须先调用父类的构造方法,在使用子类构造方法)</p><h5 id="类里面的this指向问题" tabindex="-1"><a class="header-anchor" href="#类里面的this指向问题" aria-hidden="true">#</a> 类里面的this指向问题</h5><ol><li><p>在 ES 6 中类没有变量提升 所以必须先定义类 才能通过实例化对象</p></li><li><p>类里面的共有的属性和方法一定要加this使用</p></li><li><p>constructor 里面的this指向实例对象 方法里面的this指向这个方法的调用者</p></li></ol><h5 id="insertadjacenthtml-方法" tabindex="-1"><a class="header-anchor" href="#insertadjacenthtml-方法" aria-hidden="true">#</a> insertAdjacentHTML()方法</h5><p>可以直接把字符串格式元素添加到父元素当中</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// (1) 创建li元素和section元素</span>
<span class="token keyword">var</span> li <span class="token operator">=</span> <span class="token string">&#39;&lt;li class=&quot;liactive&quot;&gt;&lt;span&gt;测试1&lt;/span&gt;&lt;span class=&quot;iconfont icon-guanbi&quot;&gt;&lt;/span&gt;&lt;/li&gt;&#39;</span><span class="token punctuation">;</span>
<span class="token comment">// (2) 把这两个元素追加到对应的父元素里面  beforeend(父元素内容的后面)</span>
that<span class="token punctuation">.</span>ul<span class="token punctuation">.</span><span class="token function">insertAdjacentHTML</span><span class="token punctuation">(</span><span class="token string">&#39;beforeend&#39;</span><span class="token punctuation">,</span> li<span class="token punctuation">)</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>#####实例成员和静态成员</p><p>实例成员就是构造函数内部通过this添加的成员，实例成员只能通过实例化的对象来访问</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Name</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span><span class="token comment">// 实例成员</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>	<span class="token comment">// 实例成员</span>
    <span class="token punctuation">}</span>
    <span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;我唱歌&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> 
<span class="token comment">//实例化对象</span>
<span class="token keyword">var</span> ltw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Name</span><span class="token punctuation">(</span><span class="token string">&#39;ltw&#39;</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//调用方法</span>
ltw<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 静态成员</span>
Name<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">&#39;男&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>静态成员在构造函数本身上添加的成员，静态成员通过构造函数访问</p><h4 id="扩展内置对象" tabindex="-1"><a class="header-anchor" href="#扩展内置对象" aria-hidden="true">#</a> 扩展内置对象</h4><p>可以通过原型对象，对原来的内置对象进行扩展自定义的方法，比如给对象增加自定义求偶数和的功能。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 原型对象的应用 扩展内置对象的方法</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span>prototupe<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        sum<span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>注意：数组和字符内置对象不能给原型对象覆盖操作 Array.prototype = {} , 只能是 <a href="http://Array.prototype.xxx" target="_blank" rel="noopener noreferrer">Array.prototype.xxx<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> = function(){}的方法。</strong></p><h4 id="原型对象的this指向" tabindex="-1"><a class="header-anchor" href="#原型对象的this指向" aria-hidden="true">#</a> 原型对象的this指向</h4><p>1.在构造函数中，里面this指向的是对象实例</p><p>2.原型对象函数里面的this 指向的是对象实例</p><h4 id="继承模式" tabindex="-1"><a class="header-anchor" href="#继承模式" aria-hidden="true">#</a> 继承模式</h4><p>ES6以前没有extends继承，可以通过构造函数+原型对象模拟实现继承，称为组合继承</p><h5 id="原型链继承" tabindex="-1"><a class="header-anchor" href="#原型链继承" aria-hidden="true">#</a> 原型链继承</h5><p>方式1: 原型链继承</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> 1. 套路
    - 定义父类型构造函数
    - 给父类型的原型添加方法
    - 定义子类型的构造函数
    - 创建父类型的对象赋值给子类型的原型
    - `将子类型原型的构造属性设置为子类型`--&gt;此处有疑惑的可以看本笔记[函数高级部分的1、原型与原型链](#1、原型与原型链)
    - 给子类型原型添加方法
    - 创建子类型的对象: 可以调用父类型的方法
 2. 关键
    - `子类型的原型为父类型的一个实例对象`
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//父类型</span>
<span class="token keyword">function</span> <span class="token function">Supper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>supProp <span class="token operator">=</span> <span class="token string">&#39;父亲的原型链&#39;</span>
<span class="token punctuation">}</span>
<span class="token comment">//给父类型的原型上增加一个[showSupperProp]方法,打印自身subProp</span>
<span class="token class-name">Supper</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">showSupperProp</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>supProp<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//子类型</span>
<span class="token keyword">function</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>subProp <span class="token operator">=</span> <span class="token string">&#39;儿子的原型链&#39;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 子类型的原型为父类型的一个实例对象</span>
<span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Supper</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 让子类型的原型的constructor指向子类型</span>
<span class="token comment">// 如果不加,其构造函数找的[`new Supper()`]时从顶层Object继承来的构造函数,指向[`Supper()`]</span>
<span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Sub
<span class="token comment">//给子类型的原型上增加一个[showSubProp]方法,打印自身subProp</span>
<span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">showSubProp</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>subProp<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> sub <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

sub<span class="token punctuation">.</span><span class="token function">showSupperProp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//父亲的原型链</span>
sub<span class="token punctuation">.</span><span class="token function">showSubProp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//儿子的原型链</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sub<span class="token punctuation">)</span>  
<span class="token doc-comment comment">/**
Sub <span class="token punctuation">{</span>subProp: &quot;儿子的原型链&quot;<span class="token punctuation">}</span>
subProp: &quot;儿子的原型链&quot;
__proto__: Supper
constructor: ƒ Sub()
showSubProp: ƒ ()
supProp: &quot;父亲的原型链&quot;
__proto__: Object
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>示例图</strong></p><p><code>注意</code>:此图中没有体现[<code>constructor构造函数 </code>],会在下方构造函数补充处指出</p><p><img src="https://raw.githubusercontent.com/molimaMCc/Image/main/imgs/image-202104557.png" alt="image-202104557" loading="lazy"></p><p><strong>构造函数补充</strong></p><p>对于代码中[<code>Sub.prototype.constructor = Sub</code>]是否有疑惑?</p><p>如果不加,其构造函数找的[<code>new Supper()</code>]是从顶层Object继承来的构造函数,指向[<code>Supper()</code>],虽然如果你不加这句话,大体上使用是不受影响的,但是你有一个属性指向是错误的,如果在大型项目中万一万一哪里再调用到了呢?</p><ol><li>这里可以补充一下constructor 的概念：</li></ol><ul><li><code>constructor 我们称为构造函数，因为它指回构造函数本身</code></li><li>其作用是让某个构造函数产生的 所有实例对象（比如f） 能够找到他的构造函数（比如Fun），用法就是f.constructor</li></ul><ol><li>此时实例对象里没有constructor 这个属性，于是沿着原型链往上找到Fun.prototype 里的constructor，并指向Fun 函数本身</li></ol><ul><li>constructor本就存在于原型中,指向构造函数,成为子对象后，如果该原型链中的constructor在自身没有而是在父原型中找到,所以指向父类的构造函数</li></ul><ol><li>由于这里的继承是直接改了构造函数的prototype 的指向，所以在 sub的原型链中，Sub.prototype 没有constructor 属性，反而是看到了一个super 实例</li><li>这就让sub 实例的constructor 无法使用了。为了他还能用，就在那个super 实例中手动加了一个constructor 属性，且指向Sub 函数看到了一个super 实例</li></ol><h5 id="借用构造函数继承-假的" tabindex="-1"><a class="header-anchor" href="#借用构造函数继承-假的" aria-hidden="true">#</a> 借用构造函数继承(假的)</h5><p>方式2: 借用构造函数继承(假的)</p><ol><li>套路: <ul><li>定义父类型构造函数</li><li>定义子类型构造函数</li><li>在子类型构造函数中调用父类型构造</li></ul></li><li>关键: <ul><li><code>在子类型构造函数中通用call()调用父类型构造函数</code></li></ul></li><li>作用:</li></ol><ul><li>能借用父类中的构造方法,但是不灵活</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
 <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//此处利用call(),将 [Student]的this传递给Person构造函数</span>
 <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>  <span class="token comment">// 相当于: this.Person(name, age)</span>
 <span class="token comment">/*this.name = name
 this.age = age*/</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price
<span class="token punctuation">}</span>

<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">&#39;Tom&#39;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">14000</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>name<span class="token punctuation">,</span> s<span class="token punctuation">.</span>age<span class="token punctuation">,</span> s<span class="token punctuation">.</span>price<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>[<code>Person</code>]中的this是动态变化的,在[<code>Student</code>]中利用[<code>Person.call(this, name, age)</code>]改变了其this指向,所以可以实现此效果</p><h5 id="组合继承" tabindex="-1"><a class="header-anchor" href="#组合继承" aria-hidden="true">#</a> 组合继承</h5><p>方式3: 原型链+借用构造函数的组合继承</p><ol><li>利用原型链实现对父类型对象的方法继承</li><li>利用super()借用父类型构建函数初始化相同属性</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
 <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>  <span class="token comment">// 为了得到属性</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price
<span class="token punctuation">}</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 为了能看到父类型的方法</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Student <span class="token comment">//修正constructor属性</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setPrice</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price
<span class="token punctuation">}</span>

<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">&#39;Tom&#39;</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">15000</span><span class="token punctuation">)</span>
s<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&#39;Bob&#39;</span><span class="token punctuation">)</span>
s<span class="token punctuation">.</span><span class="token function">setPrice</span><span class="token punctuation">(</span><span class="token number">16000</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>name<span class="token punctuation">,</span> s<span class="token punctuation">.</span>age<span class="token punctuation">,</span> s<span class="token punctuation">.</span>price<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="类的本质" tabindex="-1"><a class="header-anchor" href="#类的本质" aria-hidden="true">#</a> 类的本质</h4><ul><li>class本质还是function，可以理解为构造函数的另一种写法</li><li>类的所有方法都定义在类的prototype属性上 类创建的实例，里面也有__ proto __指向类的prototype原型对象</li><li>所以ES6的类它的绝大部分功能，ES5都可以做到，新的class写法只是让对象原型的写法更加清晰、更像面向对象编程的语言而已。</li><li>所以ES6的类其实就是语法糖。</li><li>语法糖：语法糖就是一种便捷写法，简单理解，有两种方法可以实现同样的功能，但是一种写法更加清晰、方便，那么这个方法就是语法糖。</li></ul><h3 id="es5新增方法" tabindex="-1"><a class="header-anchor" href="#es5新增方法" aria-hidden="true">#</a> ES5新增方法</h3><h4 id="数组方法" tabindex="-1"><a class="header-anchor" href="#数组方法" aria-hidden="true">#</a> 数组方法</h4><p>迭代（遍历方法）： forEach()、map()、filter()、some()、every();</p><h5 id="foreach" tabindex="-1"><a class="header-anchor" href="#foreach" aria-hidden="true">#</a> forEach()</h5><p><code>array.forEach(function(currentValue, index, arr))</code></p><ul><li>currentValue : 数组当前项的值</li><li>index ：数组当前项的索引</li><li>arr : 数组对象本身</li></ul><h5 id="filter" tabindex="-1"><a class="header-anchor" href="#filter" aria-hidden="true">#</a> filter()</h5><p><code>array.filter(function(currentValue, index, arr))</code></p><ul><li>filter() 方法创建一个新的数组，新数组中的元素时通过检查指定数组中符合条件的所有元素，主要用于筛选数组</li><li>注意它直接返回一个新数组</li><li>currentValue : 数组当前项的值</li><li>index ：数组当前项的索引</li><li>arr : 数组对象本身</li></ul><h5 id="some" tabindex="-1"><a class="header-anchor" href="#some" aria-hidden="true">#</a> some()</h5><p><code>array.some(function(currentValue, index, arr))</code></p><ul><li>some() 方法用于检测数组中的元素是否满足指定条件 通俗点 查找数组中是否有满足条件的元素</li><li>注意它返回值是布尔值，如果查找到这个元素，就返回true，如果查找不到就返回false，必须写</li><li>如果找到第一个满足条件的元素，则终止循环，不在继续查找</li><li>currentValue : 数组当前项的值</li><li>index ：数组当前项的索引</li><li>arr : 数组对象本身</li></ul><p>#####some与forEach的区别：</p><p>在forEach里面的 return 不会终止遍历</p><p>在some里面遇到return就终止遍历 迭代效率更高</p><p>filter遇到return同样不会终止迭代</p><h4 id="字符串方法" tabindex="-1"><a class="header-anchor" href="#字符串方法" aria-hidden="true">#</a> 字符串方法</h4><h5 id="trim" tabindex="-1"><a class="header-anchor" href="#trim" aria-hidden="true">#</a> trim()</h5><p><code>str.trim()</code></p><ul><li>trim() 方法会从一个字符串的两端删除空白字符</li><li>trim() 方法并不影响原字符本身，他返回的是一个新的字符串</li></ul><h4 id="对象方法" tabindex="-1"><a class="header-anchor" href="#对象方法" aria-hidden="true">#</a> 对象方法</h4><h5 id="object-defineproperty" tabindex="-1"><a class="header-anchor" href="#object-defineproperty" aria-hidden="true">#</a> Object.defineproperty()</h5><p><code>Object.defineproperty(obj, prop, descriptor)</code></p><p><strong>Object.defineproperty() 定义对象中新属性或修改原有的属性</strong></p><ul><li><strong>obj</strong>: 必需，目标对象</li><li><strong>prop</strong>：必需，需定义或修改的属性的名字</li><li><strong>descriptor</strong>: 必需，目标属性所拥有的特性</li></ul><p>Object.defineproperty() 第三个参数 descriptor 说明：以对象形式{}书写</p><ul><li>value: 设置属性的值 默认为undefined</li><li>writable: 值是否可以重写。true|false 默认为false</li><li>enumerable: 目标属性是否可以被枚举。true|false 默认为false</li><li>configurable: 目标属性是否可以被删除或是否可以再次修改特特性 true|false 默认为false</li></ul><hr><p>###函数的进阶</p><h4 id="函数的定义和调用方式" tabindex="-1"><a class="header-anchor" href="#函数的定义和调用方式" aria-hidden="true">#</a> 函数的定义和调用方式</h4><p><strong>函数的定义方式：</strong></p><ol><li><p>函数声明function关键字（命名函数）</p></li><li><p>匿名函数</p></li><li><p>new Function(参数1，参数2，‘函数体’)</p><p><code>var fn = new Function(&#39;参数1&#39;,&#39;参数2&#39;...,&#39;函数体&#39;)</code></p></li></ol><ul><li>Function里面的参数都必须是字符串格式</li><li>第三种方式执行效率低，也不方便书写，因此较少使用</li><li>所有函数都是Function的实例（对象）</li><li><strong>函数也属于对象</strong></li></ul><p><strong>函数的调用方式</strong>：</p><table><thead><tr><th style="text-align:center;">函数</th><th style="text-align:center;">调用方式</th></tr></thead><tbody><tr><td style="text-align:center;">普通函数</td><td style="text-align:center;">fn(); fn.call()</td></tr><tr><td style="text-align:center;">对象方法</td><td style="text-align:center;">对象.方法</td></tr><tr><td style="text-align:center;">构造函数</td><td style="text-align:center;">new Star();</td></tr><tr><td style="text-align:center;">绑定事件函数</td><td style="text-align:center;">触发事件</td></tr><tr><td style="text-align:center;">定时器函数</td><td style="text-align:center;">定时器自动按时调用</td></tr><tr><td style="text-align:center;">立即执行函数</td><td style="text-align:center;">自动调用</td></tr></tbody></table><h4 id="函数内this指向" tabindex="-1"><a class="header-anchor" href="#函数内this指向" aria-hidden="true">#</a> 函数内this指向</h4><table><thead><tr><th style="text-align:center;">调用方式</th><th style="text-align:center;">this指向</th></tr></thead><tbody><tr><td style="text-align:center;">普通函数调用</td><td style="text-align:center;">window</td></tr><tr><td style="text-align:center;">构造函数调用</td><td style="text-align:center;">实例对象 原型对象里面的方法指向实例对象</td></tr><tr><td style="text-align:center;">对象方法调用</td><td style="text-align:center;">该方法所属对象</td></tr><tr><td style="text-align:center;">事件绑定方法</td><td style="text-align:center;">绑定事件对象</td></tr><tr><td style="text-align:center;">定时器函数</td><td style="text-align:center;">window</td></tr><tr><td style="text-align:center;">立即执行函数</td><td style="text-align:center;">window</td></tr></tbody></table><p>####改变函数内部this指向</p><h5 id="call-方法" tabindex="-1"><a class="header-anchor" href="#call-方法" aria-hidden="true">#</a> call()方法</h5><p>call()方法调用一个对象。简单理解为调用函数的方式，但是它可以改变函数的this 指向。主要作用可以实现继承 <code>fun.call(thisArg, arg1, arg2, ...)</code></p><ul><li>thisArg: 在fun函数运行时指定的this值</li><li>arg:传递的参数</li></ul><h5 id="apply-方法" tabindex="-1"><a class="header-anchor" href="#apply-方法" aria-hidden="true">#</a> apply()方法</h5><p>apply() 方法调用一个函数。简单理解为调用函数的方法，但是它可以改变函数的 this 指向，参数必须用数组传递 <code>fun.apply(thisArg, [argsArray])</code></p><ul><li>argsArray: 传递的值，必须包含在数组里面</li><li>返回就是函数的返回值，因为他就是调用函数</li></ul><h5 id="bind-方法" tabindex="-1"><a class="header-anchor" href="#bind-方法" aria-hidden="true">#</a> bind()方法</h5><p>bind() 方法不会调用函数，但是能改变函数内部this指向 <code>fun.bind(thisArg, arg1, arg2, ...)</code></p><ul><li>thisArg: 在fun函数运行时指定的this值</li><li>arg1, arg2: 传递的其他参数</li><li>返回的是原函数改变this之后产生的新函数</li></ul><h5 id="call-apply-bind-总结" tabindex="-1"><a class="header-anchor" href="#call-apply-bind-总结" aria-hidden="true">#</a> call apply bind 总结</h5><p>相同点：</p><p>都可以改变函数内部的this指向。</p><p>区别点：</p><ol><li>call 和 apply 会调用函数，并且改变函数内部this指向</li><li>call 和 apply 传递的参数不一样，call 传递参数aru1，aru2…形式 apply 必须数组形式[arg]</li><li>bind 不会调用函数，可以改变函数内部this指向</li></ol><p>主要应用场景：</p><ol><li>call 经常做继承</li><li>apply 经常跟数组有关系，比如借助数学对象实现数组最大值最小值</li><li>bind 不调用函数，但是还想改变this指向，比如改变定时器内部的this指向</li></ol><p>####原型与原型链</p><h5 id="原型" tabindex="-1"><a class="header-anchor" href="#原型" aria-hidden="true">#</a> 原型</h5><p><strong>函数的prototype属性</strong></p><ul><li>每个函数都有一个prototype属性, 它默认指向一个Object空对象(即称为: 原型对象)</li><li>原型对象中有一个属性constructor, 它指向函数对象</li></ul><p><img src="https://raw.githubusercontent.com/molimaMCc/Image/main/imgs/yu.png" alt="yu" loading="lazy"></p><p><strong>给原型对象添加属性(<code>一般都是方法</code>)</strong></p><ul><li>作用: 函数的所有实例对象自动拥有原型中的属性(方法)---共享方法</li></ul><p><strong>代码实例</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token comment">// 每个函数都有一个prototype属性, 它默认指向一个Object空对象(即称为: 原型对象)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Date</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token keyword">typeof</span> <span class="token class-name">Date</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
  <span class="token keyword">function</span> <span class="token function">Fun</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Fun</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>  <span class="token comment">// 默认指向一个Object空对象(没有我们的属性)</span>
    
  <span class="token comment">// 原型对象中有一个属性constructor, 它指向函数对象</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Date</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token operator">===</span>Date<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Fun</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token operator">===</span>Fun<span class="token punctuation">)</span>
    
  <span class="token comment">//给原型对象添加属性(一般是方法) ===&gt;实例对象可以访问</span>
  <span class="token class-name">Fun</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;test()&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token keyword">var</span> fun <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  fun<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://raw.githubusercontent.com/molimaMCc/Image/main/imgs/原型.png" alt="原型" loading="lazy"></p><h5 id="显式原型与隐式原型" tabindex="-1"><a class="header-anchor" href="#显式原型与隐式原型" aria-hidden="true">#</a> 显式原型与隐式原型</h5><ol><li>每个函数function都有一个<code>prototype</code>，即<code>显式</code>原型(属性)</li><li>每个实例对象都有一个[<code>__ proto __</code>]，可称为<code>隐式</code>原型(属性)</li><li>对象的隐式原型的值为其对应构造函数的显式原型的值</li><li>内存结构</li></ol><p><img src="https://raw.githubusercontent.com/molimaMCc/Image/main/imgs/yuangou.png" alt="yuangou" loading="lazy"></p><ol start="5"><li>总结</li></ol><ul><li>函数的[<code>prototype</code>]属性: 在定义函数时自动添加的, 默认值是一个空Object对象</li><li>对象的[<code>__ proto __</code>]属性: 创建对象时自动添加的, <code>默认值为构造函数的prototype属性值</code></li><li>程序员能直接操作显式原型, 但不能直接操作隐式原型(ES6之前)</li></ul><ol start="6"><li><p>代码示例:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token comment">//定义构造函数</span>
  <span class="token keyword">function</span> <span class="token function">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// 内部默认执行语句: this.prototype = {}</span>
    <span class="token punctuation">}</span>
  <span class="token comment">// 1. 每个函数function都有一个prototype，即显式原型属性, 默认指向一个空的Object对象</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
  <span class="token comment">// 2. 每个实例对象都有一个__proto__，可称为隐式原型</span>
  <span class="token comment">//创建实例对象</span>
  <span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 内部默认执行语句: this.__proto__ = Fn.prototype</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span>
  <span class="token comment">// 3. 对象的隐式原型的值为其对应构造函数的显式原型的值</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token operator">===</span>fn<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span> <span class="token comment">// true</span>
  <span class="token comment">//给原型添加方法</span>
  <span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;test()&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//通过实例调用原型的方法</span>
  fn<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h5 id="原型链" tabindex="-1"><a class="header-anchor" href="#原型链" aria-hidden="true">#</a> 原型链</h5><ol><li><p><strong>原型链</strong></p><ul><li>访问一个对象的属性时，</li></ul><ul><li>先在自身属性中查找，找到返回</li><li>如果没有, 再沿着[<code>__ proto __</code>]这条链向上查找, 找到返回</li><li>如果最终没找到, 返回undefined</li></ul></li></ol><p><img src="https://raw.githubusercontent.com/molimaMCc/Image/main/imgs/lian.png" alt="" loading="lazy"></p><ul><li><p>别名: 隐式原型链</p></li><li><p>作用: 查找对象的属性(方法)</p><p><img src="https://raw.githubusercontent.com/molimaMCc/Image/main/imgs/yxl.jpeg" alt="yxl" loading="lazy"></p></li></ul><p>2.<strong>构造函数/原型/实例对象的关系(图解)</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token keyword">var</span> o1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">var</span> o2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://raw.githubusercontent.com/molimaMCc/Image/main/imgs/lian2.png" alt="lian2" loading="lazy"></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://raw.githubusercontent.com/molimaMCc/Image/main/imgs/lian3.png" alt="lian3" loading="lazy"></p><p>ps:所有函数的[<code>__ proto __</code>]都是一样的</p><p><strong>3.属性问题</strong></p><ul><li><p>读取对象的属性值时: 会自动到原型链中查找</p></li><li><p>设置对象的属性值时: 不会查找原型链, 如果当前对象中没有此属性, 直接添加此属性并设置其值</p></li><li><p>方法一般定义在原型中, 属性一般通过构造函数定义在对象本身上</p></li><li><p>代码示例:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">function</span> <span class="token function">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
  <span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token string">&#39;xxx&#39;</span>
  <span class="token keyword">var</span> fn1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn1<span class="token punctuation">.</span>a<span class="token punctuation">,</span> fn1<span class="token punctuation">)</span> <span class="token comment">//xxx Fn{}</span>

  <span class="token keyword">var</span> fn2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  fn2<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token string">&#39;yyy&#39;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn1<span class="token punctuation">.</span>a<span class="token punctuation">,</span> fn2<span class="token punctuation">.</span>a<span class="token punctuation">,</span> fn2<span class="token punctuation">)</span> <span class="token comment">//xxx yyy  Fn{a: &quot;yyy&quot;}</span>

  <span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token punctuation">}</span>
  <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&#39;Tom&#39;</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span>
  p1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&#39;Bob&#39;</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span>  <span class="token comment">//Person {name: &quot;Bob&quot;, age: 12}</span>

  <span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&#39;Jack&#39;</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span>
  p2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&#39;Cat&#39;</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span> <span class="token comment">//Person {name: &quot;Cat&quot;, age: 12}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>__proto__<span class="token operator">===</span>p2<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span> <span class="token comment">// true   --&gt;所以方法一般定义在原型</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>#####<strong>instanceof详解</strong></p><ol><li>instanceof是如何判断的?</li></ol><ul><li>表达式: A instanceof B</li><li>如果B函数的显式原型对象在A对象的原型链上, 返回true, 否则返回false</li></ul><ol><li>Function是通过new自己产生的实例</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token comment">/*
 案例1
  */</span>
 <span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span>
 <span class="token keyword">var</span> f1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1 <span class="token keyword">instanceof</span> <span class="token class-name">Foo</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1 <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token comment">// true</span>

 <span class="token comment">/*
 案例2
  */</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Function <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Function <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token comment">// true</span>

 <span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object <span class="token keyword">instanceof</span>  <span class="token class-name">Foo</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="原型相关面试题" tabindex="-1"><a class="header-anchor" href="#原型相关面试题" aria-hidden="true">#</a> 原型相关面试题</h5><p>测试题1:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token comment">/*
 测试题1
  */</span>
 <span class="token keyword">function</span> <span class="token constant">A</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
 <span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>n <span class="token operator">=</span> <span class="token number">1</span>
 <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token class-name">A</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">n</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">m</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span>
 <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>n<span class="token punctuation">,</span> b<span class="token punctuation">.</span>m<span class="token punctuation">,</span> c<span class="token punctuation">.</span>n<span class="token punctuation">,</span> c<span class="token punctuation">.</span>m<span class="token punctuation">)</span> <span class="token comment">// 1 undefined 2 3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>测试题2:原理看：构造函数/原型/实例对象的关系(图解)</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token comment">/*
  测试题2
  */</span>
 <span class="token keyword">function</span> <span class="token constant">F</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
 <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">a</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;a()&#39;</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
 <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">b</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;b()&#39;</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
 
 <span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 f<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//a()</span>
 f<span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//f.b is not a function --&gt;找不到</span>
 <span class="token constant">F</span><span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//a()</span>
 <span class="token constant">F</span><span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//b()</span>

 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="执行上下文与上下文栈" tabindex="-1"><a class="header-anchor" href="#执行上下文与上下文栈" aria-hidden="true">#</a> 执行上下文与上下文栈</h4><p>当代码在 JavaScript 中运行时，执行代码的环境非常重要，并将概括为以下几点：</p><p><strong>全局代码</strong>——第一次执行代码的默认环境。</p><p><strong>函数代码</strong>——当执行流进入函数体时</p><blockquote><p>我们当作 执行上下文 是当前代码执行的一个环境与范围。</p></blockquote><p>换句话说，当我们启动程序时，我们从全局执行上下文中开始。一些变量是在全局执行上下文中声明的。我们称之为全局变量。当程序调用一个函数时，会发生什么?</p><ul><li>JavaScript 创建一个新的执行上下文，我们叫作本地执行上下文。</li><li>这个本地执行上下文将有它自己的一组变量，这些变量将是这个执行上下文的本地变量。</li><li>新的执行上下文被推到到执行堆栈中。可以将执行堆栈看作是一种保存程序在其执行中的位置的容器。</li></ul><p>函数什么时候结束?当它遇到一个 return 语句或一个结束括号}</p><p>当一个函数结束时，会发生以下情况:</p><ul><li>这个本地执行上下文从执行堆栈中弹出。</li><li>函数将返回值返回调用上下文。调用上下文是调用这个本地的执行上下文，它可以是全局执行上下文，也可以是另外一个本地的执行上下文。这取决于调用执行上下文来处理此时的返回值，返回的值可以是一个对象、一个数组、一个函数、一个布尔值等等，如果函数没有 return 语句，则返回 undefined。</li><li>这个本地执行上下文被销毁，销毁是很重要，这个本地执行上下文中声明的所有变量都将被删除，不在有变量，这个就是为什么 称为本地执行上下文中自有的变量。</li></ul><p><img src="https://raw.githubusercontent.com/molimaMCc/Image/main/imgs/updowntext.png" alt="updowntext" loading="lazy"></p><h5 id="变量提升与函数提升" tabindex="-1"><a class="header-anchor" href="#变量提升与函数提升" aria-hidden="true">#</a> 变量提升与函数提升</h5><ol><li>变量声明提升</li></ol><ul><li>通过var定义(声明)的变量, 在定义语句之前就可以访问到</li><li>值: undefined</li></ul><ol start="2"><li>函数声明提升</li></ol><ul><li>通过function声明的函数, 在之前就可以直接调用</li><li>值: 函数定义(对象)</li></ul><ol start="3"><li><p>引出一个问题: 变量提升和函数提升是如何产生的?</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/*
 面试题 : 输出 undefined
  */</span>
 <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">3</span>
 <span class="token keyword">function</span> <span class="token function">fn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
   <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">4</span> <span class="token comment">//变量提升</span>
 <span class="token punctuation">}</span>
 <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//undefined</span>
<span class="token string">&#39;--------------------------------------------&#39;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">//undefined  变量提升</span>
 <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//可调用  函数提升</span>
 <span class="token comment">// fn3() //不能  变量提升</span>
 <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">3</span>
 <span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;fn2()&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
 <span class="token keyword">var</span> <span class="token function-variable function">fn3</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;fn3()&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h5 id="执行上下文" tabindex="-1"><a class="header-anchor" href="#执行上下文" aria-hidden="true">#</a> 执行上下文</h5><ol><li>代码分类(位置)</li></ol><ul><li>全局代码</li><li>函数(局部)代码</li></ul><ol start="2"><li>全局执行上下文</li></ol><ul><li>在执行全局代码前将window确定为全局执行上下文</li><li>对全局数据进行预处理 <ul><li>var定义的全局变量==&gt;undefined, 添加为window的属性</li><li>function声明的全局函数==&gt;赋值(fun), 添加为window的方法</li><li>this==&gt;赋值(window)</li></ul></li><li>开始执行全局代码</li></ul><ol><li>函数执行上下文</li></ol><ul><li>在调用函数, 准备执行函数体之前, 创建对应的函数执行上下文对象(虚拟的, 存在于栈中)</li><li>对局部数据进行预处理 <ul><li>形参变量==&gt;赋值(实参)==&gt;添加为执行上下文的属性</li><li><code>arguments</code>==&gt;赋值(实参列表), 添加为执行上下文的属性 --&gt;<a href="https://gitee.com/link?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2Forphaned%2FWeb%2FJavaScript%2FReference%2FFunctions%2Farguments" target="_blank" rel="noopener noreferrer">不懂的同学看这里<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>var定义的局部变量==&gt;undefined, 添加为执行上下文的属性</li><li>function声明的函数 ==&gt;赋值(fun), 添加为执行上下文的方法</li><li>this==&gt;赋值(调用函数的对象)</li></ul></li><li>开始执行函数体代码</li></ul><h5 id="执行上下文栈" tabindex="-1"><a class="header-anchor" href="#执行上下文栈" aria-hidden="true">#</a> 执行上下文栈</h5><ol><li><p>在全局代码执行前, JS引擎就会创建一个栈来存储管理所有的执行上下文对象</p></li><li><p>在全局执行上下文(window)确定后, 将其添加到栈中(压栈)--&gt;<code>所以栈底百分百是[window]</code></p></li><li><p>在函数执行上下文创建后, 将其添加到栈中(压栈)</p></li><li><p>在当前函数执行完后,将栈顶的对象移除(出栈)</p></li><li><p>当所有的代码执行完后, 栈中只剩下window</p></li><li><p><code>上下文栈数==函数调用数+</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//1. 进入全局执行上下文</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">var</span> <span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">5</span>
  <span class="token function">foo</span><span class="token punctuation">(</span>x <span class="token operator">+</span> b<span class="token punctuation">)</span>   <span class="token comment">//3. 进入foo执行上下文           </span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">5</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> c <span class="token operator">+</span> y<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">//2. 进入bar函数执行上</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p><img src="https://raw.githubusercontent.com/molimaMCc/Image/main/imgs/0001.png" alt="0001" loading="lazy"></p><h5 id="相关面试题" tabindex="-1"><a class="header-anchor" href="#相关面试题" aria-hidden="true">#</a> 相关面试题</h5><p><strong>1.函数提升优先级高于变量提升,且不会被变量声明覆盖,但是会被变量赋值覆盖</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/*
测试题1:  先执行变量提升, 再执行函数提升

*/</span>
<span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> a
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> a<span class="token punctuation">)</span> <span class="token comment">// &#39;function&#39;</span>


<span class="token comment">/*
测试题2:
*/</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>b <span class="token keyword">in</span> window<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">// undefined</span>

<span class="token comment">/*
测试题3:
*/</span>
<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">function</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
 <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">3</span> <span class="token comment">//与此行无关</span>
<span class="token punctuation">}</span>
<span class="token function">c</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 报错  c is not a function</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="作用域与作用域链" tabindex="-1"><a class="header-anchor" href="#作用域与作用域链" aria-hidden="true">#</a> 作用域与作用域链</h4><h5 id="作用域" tabindex="-1"><a class="header-anchor" href="#作用域" aria-hidden="true">#</a> 作用域</h5><ol><li>理解</li></ol><ul><li>就是一块&quot;地盘&quot;, 一个代码段所在的区域</li><li>它是静态的(相对于上下文对象), 在编写代码时就确定了</li></ul><ol><li>分类</li></ol><ul><li>全局作用域</li><li>函数作用域</li><li>没有块作用域(ES6有了) --&gt;(java语言也有)</li></ul><ol><li>作用</li></ol><ul><li>隔离变量，不同作用域下同名变量不会有冲突</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/*  //没块作用域
 if(true) { var c = 3 }
 console.log(c)
 */</span>
 <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>
   b <span class="token operator">=</span> <span class="token number">20</span>
 <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;fn()&#39;</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> x<span class="token punctuation">)</span> <span class="token comment">//100 20 300 10</span>
   <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token number">400</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;bar()&#39;</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> x<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
   <span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token comment">//1000 20 300 400 100</span>
   <span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token comment">//1000 20 300 400 200</span>
 <span class="token punctuation">}</span>
 <span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="作用域与执行上下文的区别与联系" tabindex="-1"><a class="header-anchor" href="#作用域与执行上下文的区别与联系" aria-hidden="true">#</a> 作用域与执行上下文的区别与联系</h5><ol><li>区别1:</li></ol><ul><li>全局作用域之外，每个函数都会创建自己的作用域，<code>作用域在函数定义时就已经确定了。而不是在函数调用时</code></li><li>全局执行上下文环境是在全局作用域确定之后, js代码马上执行之前创建</li><li>函数执行上下文是在调用函数时, 函数体代码执行之前创建</li></ul><ol start="2"><li>区别2:</li></ol><ul><li>作用域是静态的, 只要函数定义好了就一直存在, 且不会再变化</li><li>执行上下文是动态的, 调用函数时创建, 函数调用结束时就会自动释放</li></ul><ol start="3"><li>联系:</li></ol><ul><li><p>执行上下文(对象)是从属于所在的作用域</p></li><li><p>全局上下文环境==&gt;全局作用域</p></li><li><p>函数上下文环境==&gt;对应的函数使用域</p><p><img src="https://raw.githubusercontent.com/molimaMCc/Image/main/imgs/000233.png" alt="000233" loading="lazy"></p></li></ul><h5 id="作用域链" tabindex="-1"><a class="header-anchor" href="#作用域链" aria-hidden="true">#</a> 作用域链</h5><ol><li>理解</li></ol><ul><li>多个上下级关系的作用域形成的链, 它的方向是从下向上的(从内到外)</li><li>查找变量时就是沿着作用域链来查找的</li></ul><ol start="2"><li>查找一个变量的查找规则</li></ol><ul><li>在当前作用域下的执行上下文中查找对应的属性, 如果有直接返回, 否则进入2</li><li>在上一级作用域的执行上下文中查找对应的属性, 如果有直接返回, 否则进入3</li><li>再次执行2的相同操作, 直到全局作用域, 如果还找不到就抛出找不到的异常</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span>
 <span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">2</span>
   <span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">3</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
   <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
 <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="相关面试题-1" tabindex="-1"><a class="header-anchor" href="#相关面试题-1" aria-hidden="true">#</a> 相关面试题</h5><p><strong>1.作用域在函数定义时就已经确定了。而不是在函数调用时</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
 <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
 <span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token parameter">f</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
   <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token function">show</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//输出10</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://raw.githubusercontent.com/molimaMCc/Image/main/imgs/image-124141.png" alt="image-124141" loading="lazy"></p><p><strong>2.对象变量不能产生局部作用域</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">//对象变量不能产生局部作用域,所以会找到全局去,导致报错</span>
 <span class="token function-variable function">fn2</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn2<span class="token punctuation">)</span>
  <span class="token comment">//console.log(this.fn2)</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="闭包前的预备知识" tabindex="-1"><a class="header-anchor" href="#闭包前的预备知识" aria-hidden="true">#</a> 闭包前的预备知识</h4><h5 id="举个例子分析执行上下文" tabindex="-1"><a class="header-anchor" href="#举个例子分析执行上下文" aria-hidden="true">#</a> 举个例子分析执行上下文</h5><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1</span><span class="token operator">:</span> <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">3</span>
<span class="token number">2</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">addTwo</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">3</span><span class="token operator">:</span>  <span class="token keyword">let</span> ret <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">2</span>
<span class="token number">4</span><span class="token operator">:</span>   <span class="token keyword">return</span> ret
<span class="token number">5</span><span class="token operator">:</span>  <span class="token punctuation">}</span>
<span class="token number">6</span><span class="token operator">:</span> <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token function">addTwo</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token number">7</span><span class="token operator">:</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为了理解 JavaScript 引擎是如何工作的，让我们详细分析一下：</p><ol><li>在第 1 行，我们在全局执行上下文中声明了一个新变量 a，并将赋值为 3。</li><li>接下来就变得棘手了，第 2 行到第 5 行实际上是在一起的。这里发生了什么?</li></ol><ul><li>我们在全局执行上下文中声明了一个名为<code>addTwo</code>的新变量,我们给它分配了什么? --&gt;<code>一个函数定义</code>。</li><li>两个括号{}之间的任何内容都被分配给<code>addTwo</code>，<code>函数内部的代码没有被求值，没有被执行，只是存储在一个变量中以备将来使用</code>。</li></ul><ol start="3"><li>现在我们在第 6 行。</li></ol><ul><li>它看起来很简单，但是这里有很多东西需要拆开分析。首先，我们在全局执行上下文中声明一个新变量，并将其标记为[<code>b</code>]，<code>变量一经声明，其值即为 undefined</code>。</li><li>接下来，仍然在第 6 行，我们看到一个赋值操作符。我们准备给变量<code>b</code>赋一个新值，接下来我们看到一个函数被调用。<code>当您看到一个变量后面跟着一个圆括号(…)时，这就是调用函数的信号</code>，接着，每个函数都返回一些东西(值、对象或 undefined)，无论从函数返回什么，都将赋值给变量<code>b</code>。</li></ul><ol start="4"><li>但是首先我们需要调用标记为<code>addTwo</code>的函数。JavaScript 将在其全局执行上下文内存中查找名为<code>addTwo</code>的变量。噢，它找到了一个，它是在[<code>步骤 2(或第 2 - 5 行)中定义</code>]的。变量[<code>addTwo</code>]包含一个函数定义。</li></ol><ul><li>注意:<code>变量[a]作为参数传递给函数</code>。</li><li>JavaScript 在全局执行上下文内存中搜索变量<code>a</code>，找到它，发现它的值是 3，并将数字 3 作为参数传递给函数，准备好执行函数。</li></ul><ol start="5"><li>现在执行上下文将切换,创建了一个新的本地执行上下文，我们将其命名为[“<code>addTwo 执行上下文</code>”，<code>执行上下文被推送到调用堆栈上</code>。在 addTwo 执行上下文中，我们要做的第一件事是什么?</li></ol><ul><li>你可能会说，“在 addTwo 执行上下文中声明了一个新的变量 ret”，<code>这是不对的</code>。</li><li><code>正确的答案是</code>:我们需要先看函数的参数。<code>在 addTwo 执行上下文中声明一个新的变量[x]</code>，因为值 3 是作为参数传递的，所以变量 x 被赋值为 3。</li><li>下一步才是在 addTwo 执行上下文中声明一个新的变量<code>ret</code>。它的值被设置为 undefined(第三行)。</li></ul><ol start="6"><li>仍然是第 3 行，需要执行一个相加操作。</li></ol><ul><li>首先我们需要<code>x</code>的值，JavaScript 会寻找一个变量<code>x</code>，它会首先在<code>addTwo</code>执行上下文中寻找，找到了一个值为 3。第二个操作数是数字 2。两个相加结果为 5 就被分配给变量<code>ret</code>。</li></ul><ol start="7"><li><p>第 4 行，我们返回变量<code>ret</code>的内容，在 addTwo 执行上下文中查找，找到值为 5，返回，函数结束。</p></li><li><p>第 4 - 5 行，函数结束。</p></li></ol><ul><li><code>addTwo 执行上下文被销毁</code>，变量<code>x</code>和<code>ret</code>被消去了，它们已经不存在了。<code>addTwo 执行上下文从调用堆栈中弹出</code>，返回值返回给调用上下文，在这种情况下，调用上下文是全局执行上下文，因为函数<code>addTwo</code> 是从全局执行上下文调用的。</li></ul><ol start="9"><li><p>现在我们继续第 4 步的内容，返回值 5 被分配给变量<code>b</code>，`此时实际上程序仍然在第6行。</p></li><li><p>在第 7 行，<code>b</code>的值 5 被打印到控制台了。</p></li></ol><p>对于一个非常简单的程序，这是一个非常冗长的解释，我们甚至还没有涉及闭包。但肯定会涉及的，不过首先我们得绕一两个弯。</p><h5 id="举个例子分析词法作用域" tabindex="-1"><a class="header-anchor" href="#举个例子分析词法作用域" aria-hidden="true">#</a> 举个例子分析词法作用域</h5><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1</span><span class="token operator">:</span> <span class="token keyword">let</span> val1 <span class="token operator">=</span> <span class="token number">2</span>
<span class="token number">2</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">multiplyThis</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">3</span><span class="token operator">:</span>   <span class="token keyword">let</span> ret <span class="token operator">=</span> n <span class="token operator">*</span> val1
<span class="token number">4</span><span class="token operator">:</span>    <span class="token keyword">return</span> ret
<span class="token number">5</span><span class="token operator">:</span> <span class="token punctuation">}</span>
<span class="token number">6</span><span class="token operator">:</span> <span class="token keyword">let</span> multiplied <span class="token operator">=</span> <span class="token function">multiplyThis</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
<span class="token number">7</span><span class="token operator">:</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;example of scope:&#39;</span><span class="token punctuation">,</span> multiplied<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>下面列出向个步骤来解释一下（如果你已经熟悉了，请跳过）：</p><ol><li>在全局执行上下文中声明一个新的变量<code>val1</code>，并将其赋值为 2。</li><li>行 2 - 5，声明一个新的变量 <code>multiplyThis</code>，并给它分配一个函数定义。</li><li>第六行，声明一个在全局执行上下文 <code>multiplied</code> 新变量。</li><li>从全局执行上下文内存中查找变量<code>multiplyThis</code>，并将其作为函数执行，传递数字 6 作为参数。</li></ol><ul><li>新函数调用(创建新执行上下文），创建一个新的 <code>multiplyThis</code> 函数执行上下文。</li><li>在 <code>multiplyThis</code> 执行上下文中，<code>声明一个变量 n 并将其赋值为 6</code> --&gt;声明后才会进入函数体内部执行</li></ul><ol start="5"><li>执行函数回到第 3 行。</li></ol><ul><li>在<code>multiplyThis</code>执行上下文中，声明一个变量<code>ret</code>。</li><li>继续第 3 行。对两个操作数 n 和 val1 进行乘法运算.在multiplyThis执行上下文中查找变量n。 <ul><li>我们在步骤 6 中声明了它,它的内容是数字 6。在<code>multiplyThis</code>执行上下文中查找变量<code>val1</code>。</li><li><code>multiplyThis</code>执行上下文没有一个标记为 val1 的变量。<code>我们向调用上下文查找，调用上下文是全局执行上下文，在全局执行上下文中</code>寻找 [<code>val1</code>]。哦，是的、在那儿，它在步骤 1 中定义，数值是 2。</li></ul></li><li>继续第 3 行。将两个操作数相乘并将其赋值给<code>ret</code>变量，6 * 2 = 12，ret 现在值为 12。</li></ul><ol start="6"><li><p>返回<code>ret</code>变量，销毁<code>multiplyThis</code>执行上下文及其变量 <code>ret</code> 和 <code>n</code> 。变量 <code>val1</code> 没有被销毁，因为它是全局执行上下文的一部分。</p></li><li><p>回到第 6 行。在调用上下文中，数字 12 赋值给 <code>multiplied</code> 的变量。</p></li><li><p>最后在第 7 行，我们在控制台中打印 <code>multiplied</code> 变量的值</p></li></ol><p>在这个例子中，我们需要记住一个函数可以访问在它的调用上下文中定义的变量，这个就是<strong>词法作用域（Lexical scope）</strong></p><h5 id="高阶函数" tabindex="-1"><a class="header-anchor" href="#高阶函数" aria-hidden="true">#</a> 高阶函数</h5><p>高阶函数是对其他函数进行操作的函数，它接收函数作为参数或将函数作为返回值输出</p><p>在第一个例子中，函数<code>addTwo</code>返回一个数字。请记住，函数可以返回任何东西。让我们看一个返回函数的函数示例，因为这对于下方理解闭包非常重要。看例子：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1</span><span class="token operator">:</span> <span class="token keyword">let</span> val <span class="token operator">=</span> <span class="token number">7</span>
<span class="token number">2</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">createAdder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">3</span><span class="token operator">:</span>   <span class="token keyword">function</span> <span class="token function">addNumbers</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">4</span><span class="token operator">:</span>     <span class="token keyword">let</span> ret <span class="token operator">=</span> a <span class="token operator">+</span> b	
<span class="token number">5</span><span class="token operator">:</span>     <span class="token keyword">return</span> ret
<span class="token number">6</span><span class="token operator">:</span>   <span class="token punctuation">}</span>
<span class="token number">7</span><span class="token operator">:</span>   <span class="token keyword">return</span> addNumbers
<span class="token number">8</span><span class="token operator">:</span> <span class="token punctuation">}</span>
<span class="token number">9</span><span class="token operator">:</span> <span class="token keyword">let</span> adder <span class="token operator">=</span> <span class="token function">createAdder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">10</span><span class="token operator">:</span> <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token function">adder</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>
<span class="token number">11</span><span class="token operator">:</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;example of function returning a function: &#39;</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>让我们回到分步分解:</p><ol><li>第一行。我们在全局执行上下文中声明一个变量<code>val</code>并赋值为 7。</li><li>行 2 - 8。我们在全局执行上下文中声明了一个名为 <code>createAdder</code> 的变量，并为其分配了一个函数定义。</li></ol><ul><li>内部的第 3 至 7 行描述了上述函数定义，和以前一样，在这一点上，我们没有直接讨论这个函数。我们只是将函数定义存储到[<code>createAdder</code>]变量中。</li></ul><ol start="3"><li>第 9 行。</li></ol><ul><li>我们在全局执行上下文中声明了一个名为 <code>adder</code> 的新变量，暂时，值为 undefined</li><li>我们看到括号()，我们需要执行或调用一个函数，查找全局执行上下文的内存并查找名为<code>createAdder</code> 的变量，它是在步骤 2 中创建的。好吧，我们调用它。</li></ul><ol start="4"><li>调用函数时，执行到第 2 行。</li></ol><ul><li>创建一个新的<code>createAdder</code>执行上下文。我们可以在<code>createAdder</code>的执行上下文中创建自有变量。js 引擎将<code>createAdder</code>的上下文添加到调用堆栈。这个函数没有参数，让我们<code>直接跳到它的主体部分</code>.</li></ul><ol start="5"><li>第 3 - 6 行(执行到主体函数中)。</li></ol><ul><li>我们有一个新的函数声明，我们在<code>createAdder</code>执行上下文中创建一个变量 addNumbers。这很重要，<code>addnumber</code>只存在于<code>createAdder</code>执行上下文中。我们将函数定义存储在名为 <code>addNumbers</code> 的自有变量中。</li><li>在第 7 行，我们返回变量<code>addNumbers</code>的内容。js 引擎查找一个名为<code>addNumbers</code>的变量并找到它，这是一个函数定义。好的，函数可以返回任何东西，包括函数定义。我们返<code>addNumbers</code>的定义。第 4 行和第 5 行括号之间的内容构成该函数定义。</li></ul><ol start="6"><li>[return addNumbers]时，<code>createAdder</code>执行上下文将被销毁。<code>addNumbers</code> 变量不再存在。但<code>addNumbers</code>函数定义仍然存在，<code>因为它返回并赋值给了 adder 变量</code>。</li></ol><ul><li><code>此处很重要</code>!!!此时的[<code>adder=createAdder()</code>]实际上它的值是[<code>addNumbers</code>]的函数定义而不是[<code>createAdder</code>]了,adder现在是一个匿名函数--这里有点绕,要确定理解</li></ul><ol start="7"><li>第 10 行。我们在全局执行上下文中定义了一个新的变量 <code>sum</code>，先赋值为 undefined;</li></ol><ul><li>接下来我们需要执行一个函数。哪个函数? <ul><li>是名为<code>adder</code>变量中定义的函数。我们在全局执行上下文中查找它，果然找到了它，这个函数有两个参数。</li><li>让我们查找这两个参数，第一个是我们在步骤 1 中定义的变量<code>val</code>，它表示数字 7，第二个是数字 8。</li></ul></li><li>现在我们要执行这个函数，函数定义概述在第 3-5 行，<code>因为这个函数是匿名</code>，为了方便理解，我们暂且叫它<code>adder</code>吧。这时创建一个<code>adder</code>函数执行上下文，在<code>adder</code>执行上下文中创建了两个新变量 <code>a</code> 和 <code>b</code>。它们分别被赋值为 7 和 8，因为这些是我们在上一步传递给函数的参数。</li></ul><ol start="8"><li>执行回到第 4 行。</li></ol><ul><li>在<code>adder</code>执行上下文中声明了一个名为<code>ret</code>的新变量,</li><li>将变量<code>a</code>的内容和变量<code>b</code>的内容相加得 15 并赋给 ret 变量。</li></ul><ol start="9"><li><p><code>ret</code>变量从该函数返回。这个匿名函数执行上下文被销毁，从调用堆栈中删除，变量<code>a</code>、<code>b</code>和<code>ret</code>不再存在。</p></li><li><p>返回值被分配给我们在步骤 9 中定义的<code>sum</code>变量。</p></li><li><p>我们将<code>sum</code>的值打印到控制台。</p></li></ol><p>如预期，控制台将打印 15。我们在这里确实经历了很多困难，我想在这里说明几点。首先，函数定义可以存储在变量中，函数定义在程序调用之前是不可见的。其次，每次调用函数时，都会(临时)创建一个本地执行上下文。当函数完成时，执行上下文将消失。函数在遇到 return 或右括号}时执行完成。</p><p>所谓高阶函数，就是一个函数就可以接收另一个函数作为参数，或者是返回一个函数--&gt;常见的高阶函数有map、reduce、filter、sort等</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">ADD</span> <span class="token operator">=</span><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> a<span class="token operator">+</span>b
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
调用：<span class="token constant">ADD</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>即可获得结果
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>1.map</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>map接受一个函数作为参数，不改变原来的数组，只是返回一个全新的数组
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> arr1 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">//arr  输出[1,2,3,4,5]</span>
<span class="token comment">//arr1 输出[2,2,2,2,2]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2.reduce</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token comment">//reduce也是返回一个全新的数组。reduce接受一个函数作为参数，这个函数要有两个形参，代表数组中的前两项，reduce会将这个函数的结果与数组中的第三项再次组成这个函数的两个形参以此类推进行累积操作</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> arr2 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> a<span class="token operator">+</span>b<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span> <span class="token comment">// 15</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.filter</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//filter返回过滤后的数组。filter也接收一个函数作为参数，这个函数将作用于数组中的每个元素，根据该函数每次执行后返回的布尔值来保留结果，如果是true就保留，如果是false就过滤掉（这点与map要区分）</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>
 <span class="token keyword">var</span> arr3 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span><span class="token comment">// [2,4]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>####闭包</p><ul><li>变量作用域 <ul><li>变量根据作用域的不同分为两种：全局变量和局部变量。</li></ul></li></ul><ol><li>函数内部可以使用全局变量。</li><li>函数外部不可以使用局部变量。</li><li>当函数执行完毕，本作用域内的局部变量会销毁</li></ol><ul><li><p>什么是闭包</p><ul><li><strong>闭包(closure) 指有权访问另一个函数作用域中变量的函数</strong>。</li><li>简单理解就是，一个作用域可以访问另外一个函数内部的局部变量</li></ul></li><li><p><strong>闭包的作用</strong></p><ul><li>让函数外部可以操作(读写)到函数内部的数据(变量/函数)</li><li>闭包的主要作用：<strong>延伸了变量的作用范围</strong></li></ul></li><li><p>相关问题</p><p>(1)函数执行完后, 函数内部声明的局部变量是否还存在?</p><pre><code>  一般是不存在, 存在于闭包中的变量才可能存在.
</code></pre></li></ul><p>​ (2)在函数外部能直接访问函数内部的局部变量吗?</p><p>​ 不能, 但我们可以通过闭包让外部操作它.</p><h5 id="错误场景" tabindex="-1"><a class="header-anchor" href="#错误场景" aria-hidden="true">#</a> 错误场景</h5><p>需求: 点击某个按钮, 提示点击的是第n个按钮</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>测试<span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>测试<span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>测试<span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>
<span class="token literal-property property">需求</span><span class="token operator">:</span> 点击某个按钮<span class="token punctuation">,</span> 提示<span class="token string">&quot;点击的是第n个按钮&quot;</span>
<span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
 <span class="token keyword">var</span> btns <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">)</span>
 <span class="token comment">//注意[btns]不是一个数组,它是一个伪数组</span>
 <span class="token comment">//每次获取[btns.length]其实都是需要进行计算的(因为它是伪数组)</span>
 <span class="token comment">//所以为了性能更好,在此处赋值,就只需要计算一次</span>
 <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>length<span class="token operator">=</span>btns<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">var</span> btn <span class="token operator">=</span> btns<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
   btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//遍历加监听</span>
     <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;第&#39;</span><span class="token operator">+</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&#39;个&#39;</span><span class="token punctuation">)</span>     <span class="token comment">//结果 全是[4]</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此处错误是,直接修改并使用全局变量[<code>i</code>],导致for循环结束后,所有点击按钮绑定的弹窗值都是[<code>i+1</code>]</p><p>随后调用时,都会找到[<code>i</code>]这个变量,但是此时i==3,所以所有结果都是4</p><h5 id="将变量挂载到自身来解决" tabindex="-1"><a class="header-anchor" href="#将变量挂载到自身来解决" aria-hidden="true">#</a> <strong>将变量挂载到自身来解决</strong></h5><p>解决方式:将btn所对应的下标保存在btn上</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>测试<span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>测试<span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>测试<span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>
<span class="token literal-property property">需求</span><span class="token operator">:</span> 点击某个按钮<span class="token punctuation">,</span> 提示<span class="token string">&quot;点击的是第n个按钮&quot;</span>
<span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
 <span class="token keyword">var</span> btns <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">)</span>
 <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>length<span class="token operator">=</span>btns<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">var</span> btn <span class="token operator">=</span> btns<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
   <span class="token comment">//将btn所对应的下标保存在btn上</span>
   btn<span class="token punctuation">.</span>index <span class="token operator">=</span> i
   btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//遍历加监听</span>
     <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;第&#39;</span><span class="token operator">+</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&#39;个&#39;</span><span class="token punctuation">)</span>     <span class="token comment">//结果 全是[4]</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>将其放在自己的身上,需要时自己找自己拿,这样就能解决</p><h5 id="利用闭包" tabindex="-1"><a class="header-anchor" href="#利用闭包" aria-hidden="true">#</a> <strong>利用闭包</strong></h5><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>测试<span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>测试<span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>测试<span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
 <span class="token comment">//利用闭包</span>
 <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>length<span class="token operator">=</span>btns<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//此处的j是局部的,它将传入的[i]存入局部的[j]中,这样就能实现效果 </span>
   <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">j</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">var</span> btn <span class="token operator">=</span> btns<span class="token punctuation">[</span>j<span class="token punctuation">]</span>
     btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;第&#39;</span><span class="token operator">+</span><span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&#39;个&#39;</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>  
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="常见的闭包" tabindex="-1"><a class="header-anchor" href="#常见的闭包" aria-hidden="true">#</a> 常见的闭包</h5><p><strong>1. 将函数作为另一个函数的返回值</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 1. 将函数作为另一个函数的返回值</span>
 <span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span>
   <span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     a<span class="token operator">++</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> fn2
 <span class="token punctuation">}</span>
 <span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
 <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2.将函数作为实参传递给另一个函数调用</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 2. 将函数作为实参传递给另一个函数调用</span>
 <span class="token keyword">function</span> <span class="token function">showDelay</span><span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token function">alert</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
 <span class="token function">showDelay</span><span class="token punctuation">(</span><span class="token string">&#39;atguigu&#39;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3.高阶函数与柯里化</strong></p><p>有时候闭包在你甚至没有注意到它的时候就会出现，你可能已经看到了我们称为部分应用程序的示例</p><p><strong>(1)从 ES6 高阶箭头函数理解函数柯里化(<code>运用到闭包</code>)</strong></p><p>例子：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token parameter">a</span> <span class="token operator">=&gt;</span> <span class="token parameter">b</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>以上是一个很简单的相加函数，把它转化成 ES5 的写法如下</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> a <span class="token operator">+</span> b
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> add3 <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">//add3表示一个指向函数的变量 可以当成函数调用名来用</span>
<span class="token function">add3</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">4</span> <span class="token comment">//true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>再简化一下，可以写成如下形式</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> param <span class="token operator">=</span> a<span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token function-variable function">innerFun</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> param <span class="token operator">+</span> b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> innerFun<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>虽然好像没什么意义，但是很显然上述使用了[<code>闭包</code>]，而且该函数的返回值是一个函数。其实，这就是<code>高阶函数的定义：以函数为参数或者返回值是函数的函数。</code></p><p><img src="https://raw.githubusercontent.com/molimaMCc/Image/main/imgs/image-123111.png" alt="image-123111" loading="lazy">...</p><p><strong>(2) 柯里化</strong></p><p><img src="https://raw.githubusercontent.com/molimaMCc/Image/main/imgs/image-202102.png" alt="image-202102" loading="lazy"></p><p>关键就是<code>理解柯里化</code>，其实可以把它理解成，柯里化后，<code>将第一个参数变量存在函数里面了(闭包)</code>，然后本来需要n个参数的函数可以变成只需要剩下的（n - 1个）参数就可以调用，比如</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token parameter">y</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> y
<span class="token keyword">let</span> add2 <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">*</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
本来完成 add 这个操作，应该是这样调用
<span class="token keyword">let</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> y
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token number">1.</span> 而现在 add2 函数完成同样操作只需要一个参数，这在函数式编程中广泛应用。
<span class="token keyword">let</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token parameter">y</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> y
<span class="token keyword">let</span> add2 <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token number">2.</span>详细解释一下，就是 add2 函数 等价于 有了 x 这个闭包变量的 <span class="token parameter">y</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> y 函数<span class="token punctuation">,</span>并且此时 x <span class="token operator">=</span> <span class="token number">2</span>，所以此时调用
<span class="token function">add2</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>(3)总结</strong></p><ol><li>如果是<code>a =&gt; b =&gt; c =&gt; {xxx}</code>这种多次柯里化的,如何理解?</li></ol><p>理解:前<code>n - 1</code>次调用，其实是提前将参数传递进去，并没有调用最内层函数体，最后一次调用才会调用最内层函数体，并返回最内层函数体的返回值</p><ol start="2"><li><p>结合上文可知，这里的多个连续箭头（无论俩个箭头函数三个及以上）函数连在一起 就是在柯里化。所以连续箭头函数就是多次柯里化函数的 es6 写法。</p></li><li xxx=""><p><code>调用特点</code>:let test = a =&gt; b =&gt; c =&gt;</p></li></ol><p>比如对于上面的 <code>test</code> 函数，它有 3 个箭头， 这个函数要被调用 3 次 <code>test(a)(b)(c)</code>，前两次调用只是在传递参数，只有最后依次调用才会返回 <code>{xxx}</code> 代码段的返回值，并且在 <code>{xxx}</code> 代码段中可以调用 a,b,</p><h5 id="闭包的生命周期" tabindex="-1"><a class="header-anchor" href="#闭包的生命周期" aria-hidden="true">#</a> 闭包的生命周期</h5><ol><li>产生: 在嵌套内部函数定义执行完时就产生了(不是在调用)</li><li>死亡: 在嵌套的内部函数成为垃圾对象时</li></ol><ul><li><p>即没有人指向它时死亡,通常置为[<code>null</code>],当然指向其他也行,但不安全(容易污染变量)</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//闭包的生命周期</span>
<span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">//此时闭包就已经产生了(函数提升,实际上[fn2]提升到了第一行, 内部函数对象已经创建了)</span>
   <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span>
   <span class="token keyword">function</span> <span class="token function">fn2</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//如果时[let fn2=function(){}],那么在这行才会产生闭包</span>
     a<span class="token operator">++</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> fn2
 <span class="token punctuation">}</span>
 <span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
 <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 4</span>
 f <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">//闭包死亡(包含闭包的函数对象成为垃圾对象)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h5 id="闭包的应用" tabindex="-1"><a class="header-anchor" href="#闭包的应用" aria-hidden="true">#</a> 闭包的应用</h5><p>闭包的应用 : 定义JS模块</p><ul><li><p>具有特定功能的js文件</p></li><li><p>将所有的数据和功能都封装在一个函数内部(私有的)</p></li><li><p>只向外暴露一个包信n个方法的对象或函数</p></li><li><p>模块的使用者, 只需要通过模块暴露的对象调用方法来实现对应的功能</p><p>模块定义:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//myModule.js</span>
<span class="token keyword">function</span> <span class="token function">myModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//私有数据</span>
  <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token string">&#39;My atguigu&#39;</span>
  <span class="token comment">//操作数据的函数</span>
  <span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;doSomething() &#39;</span><span class="token operator">+</span>msg<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">doOtherthing</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;doOtherthing() &#39;</span><span class="token operator">+</span>msg<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
                            
  <span class="token comment">//向外暴露对象(给外部使用的方法)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">doSomething</span><span class="token operator">:</span> doSomething<span class="token punctuation">,</span>
    <span class="token literal-property property">doOtherthing</span><span class="token operator">:</span> doOtherthing
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
                            
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token comment">// myModule2.js   </span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//私有数据</span>
  <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token string">&#39;My atguigu&#39;</span>
  <span class="token comment">//操作数据的函数</span>
  <span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;doSomething() &#39;</span><span class="token operator">+</span>msg<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">doOtherthing</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;doOtherthing() &#39;</span><span class="token operator">+</span>msg<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
                            
  <span class="token comment">//向外暴露对象(给外部使用的方法)</span>
  window<span class="token punctuation">.</span>myModule2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">doSomething</span><span class="token operator">:</span> doSomething<span class="token punctuation">,</span>
    <span class="token literal-property property">doOtherthing</span><span class="token operator">:</span> doOtherthing
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    
                                
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>模块调用:</p><p>​</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//调用示例</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>  模块调用<span class="token number">1</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;myModule.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
  <span class="token keyword">var</span> module <span class="token operator">=</span> <span class="token function">myModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  module<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  module<span class="token punctuation">.</span><span class="token function">doOtherthing</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>  模块调用<span class="token number">2</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;myModule2.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
  myModule2<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  myModule2<span class="token punctuation">.</span><span class="token function">doOtherthing</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>闭包的缺点及解决</strong></p><ol><li>缺点:</li></ol><ul><li>函数执行完后, 函数内的局部变量没有释放, 占用内存时间会变长</li><li>容易造成内存泄露</li></ul><ol start="2"><li>解决:</li></ol><ul><li>能不用闭包就不用</li><li>及时释放</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">100000</span><span class="token punctuation">)</span>
  <span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> fn2
<span class="token punctuation">}</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
f <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">//让内部函数成为垃圾对象--&gt;回收闭包</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我还有一个解决方式,调用时直接<code>f()()</code>直接运行调用即可--&gt;匿名函数,用完自动就销毁了</p><h5 id="内存溢出与内存泄露" tabindex="-1"><a class="header-anchor" href="#内存溢出与内存泄露" aria-hidden="true">#</a> 内存溢出与内存泄露</h5><ol><li>内存溢出</li></ol><ul><li>一种程序运行出现的错误</li><li>当程序运行需要的内存超过了剩余的内存时, 就出抛出内存溢出的错误</li></ul><ol start="2"><li>内存泄露</li></ol><ul><li>占用的内存没有及时释放</li><li><code>内存泄露积累多了就容易导致内存溢出</code></li><li>常见的内存泄露: <ul><li>意外的全局变量</li><li>没有及时清理的计时器或回调函数</li><li>闭包</li></ul></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
 <span class="token comment">// 1. 内存溢出</span>
 <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
 <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">10000000</span><span class="token punctuation">)</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;-----&#39;</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>

 <span class="token comment">// 2. 内存泄露</span>
   <span class="token comment">// 意外的全局变量</span>
 <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">10000000</span><span class="token punctuation">)</span>  <span class="token comment">//不使用var let const去承接</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
 <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// 没有及时清理的计时器或回调函数</span>
 <span class="token keyword">var</span> intervalId <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//启动循环定时器后不清理</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;----&#39;</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>

 <span class="token comment">// clearInterval(intervalId)</span>

   <span class="token comment">// 闭包</span>
 <span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">4</span>
   <span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">++</span>a<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> fn2
 <span class="token punctuation">}</span>
 <span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token comment">// f = null</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>不使用let const var等去声明,实际上是挂载到[<code>window</code>]上的,所以导致内存泄露</p><p><img src="https://raw.githubusercontent.com/molimaMCc/Image/main/imgs/image-20219.png" alt="image-20219" loading="lazy"></p><h5 id="相关面试题-2" tabindex="-1"><a class="header-anchor" href="#相关面试题-2" aria-hidden="true">#</a> 相关面试题</h5><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//代码片段一  --&gt;没有产生闭包:因为内部函数没有调用外部变量</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;The Window&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> object <span class="token operator">=</span> <span class="token punctuation">{</span>
 <span class="token literal-property property">name</span> <span class="token operator">:</span> <span class="token string">&quot;My Object&quot;</span><span class="token punctuation">,</span>
 <span class="token function-variable function">getNameFunc</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span><span class="token function">getNameFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//?  the window</span>
<span class="token comment">//函数体的this是window</span>

<span class="token comment">//代码片段二</span>
<span class="token keyword">var</span> name2 <span class="token operator">=</span> <span class="token string">&quot;The Window&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> object2 <span class="token operator">=</span> <span class="token punctuation">{</span>
 <span class="token literal-property property">name2</span> <span class="token operator">:</span> <span class="token string">&quot;My Object&quot;</span><span class="token punctuation">,</span>
 <span class="token function-variable function">getNameFunc</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token comment">//此处的this指向是[getNameFunc],他是对象中的属性,所以this指向就是object</span>
   <span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token comment">//此处用的是保存的  that</span>
     <span class="token keyword">return</span> that<span class="token punctuation">.</span>name2<span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>object2<span class="token punctuation">.</span><span class="token function">getNameFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//?  my object</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>代码片段一:</li></ol><ul><li>函数体的<code>this</code>指向是[<code>window</code>]</li><li>没有产生闭包:因为内部函数没有调用外部变量</li></ul><ol start="2"><li>代码片段二为何指向是对象?</li></ol><ul><li>this指向是调用它的[<code>getNameFunc</code>],他是对象中的属性,所以this指向就是object</li><li>产生了闭包</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span>o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span>
 <span class="token keyword">return</span> <span class="token punctuation">{</span>
   <span class="token function-variable function">fun</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">m</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token function">fun</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span>n<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">//undefined</span>
a<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment">//0</span>
a<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment">//0	</span>
a<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>  <span class="token comment">//0</span>

<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">//undefined 0 1 2</span>

<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">//undefined  0</span>
c<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment">//1 --&gt;经过上方定义后 n固定为1</span>
c<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token comment">//1 --&gt;此处是陷阱!!!  一直没有改到n,所以一直是1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="递归" tabindex="-1"><a class="header-anchor" href="#递归" aria-hidden="true">#</a> 递归</h4><ul><li>什么是递归？ <ul><li>如果一个函数在内部可以调用其本身，那么这个函数就是递归函数。</li><li>简单理解：函数内部自己调用自己，这个函数就是递归函数 递归函数的作用和循环效果一样</li><li>由于递归很容易发生 “栈溢出” 错误(stack overflow), 所以必须要加退出条件 return</li></ul></li></ul><hr><p>###浅拷贝和深拷贝</p><ol><li>浅拷贝只是拷贝一层，更深层次对象级别的值拷贝引用</li><li>深拷贝拷贝多层，每一级别的数据都会拷贝。</li><li>Object.assign(target, …sources) ES6新增方法可以浅拷</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 浅拷贝</span>
<span class="token keyword">var</span> obj <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;andy&#39;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// k是属性名 obj[k] 属性值</span>
    o<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 深拷贝</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;andy&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 封装函数</span>
<span class="token comment">// 利用函数递归</span>
<span class="token keyword">function</span> <span class="token function">deepCopy</span> <span class="token punctuation">(</span><span class="token parameter">newobj<span class="token punctuation">,</span> oldobj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token keyword">in</span> oldobj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 判断我们的属性值属于那种数据类型 </span>
        <span class="token comment">// 获取属性值 oldobj[k];</span>
        <span class="token keyword">var</span> item <span class="token operator">=</span> oldobj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">// 判断这个值是否是数组 </span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             newobj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token function">deepCopy</span><span class="token punctuation">(</span>newobj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token comment">// 判断值是否是对象</span>
            newobj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token function">deepCopy</span><span class="token punctuation">(</span>newobj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
             <span class="token comment">// 属于简单数据类型</span>
            newobj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p>###严格模式</p><p>####什么是严格模式</p><ul><li>JavaScript除了提供正常模式外，还提供了严格模式(strict mode)。 ES5的严格模式是采用具有限制性</li><li>JavaScript变体的一种方法，即在严格的条件下运行js代码</li><li>严格模式在IE10以上版本的浏览器才会被支持，旧版本浏览器中会被忽略</li><li>严格模式对正常的 JavaScript语义做了一些更改： <ol><li>消除了 JavaScript语法的一些不合理、不严谨之处，减少了一些怪异的行为。</li><li>消除代码运行的一些不安全之处，保证代码运行的安全。</li><li>提高编译器效率，增加运行速度。</li><li>禁用了在ECMAScript 的未来版本中可能会定义的一些语法，为未来新版本的 JavaScript做好铺垫。比如一些保留字如：class,enum,export,extends,import,super 不能做变量名</li></ol></li></ul><p>####开启严格模式</p><p>​ 严格模式可以应用到整个脚本或个别函数中。因此在使用时，我们可以将严格模式分为“为脚本开启严格模式”和“为函数开启严格模式”两种情况</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 1. 为脚本开启严格模式</span>
<span class="token comment">// (1) 为整个脚本文件开启严格模式，需要在所有语句之前放一个特定语句 &quot;use strict&quot;;(或&#39;use strict&#39;;).</span>
	<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
        <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;这是严格模式。&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>   
<span class="token comment">// 因为 &quot;use strict&quot; 加了引号，所以老版本的浏览器会把它当作一行字符串而忽略。</span>

<span class="token comment">// (2) 有的 script 基本是严格模式，有的 script 脚本是正常模式，这样不利于文件合并，所以可以将整个脚本文件放在立即执行的匿名函数之中，这样独立创建一个作用域而不影响其他 script脚本文件。</span>
   <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
        <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
            <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token number">2.</span> 为函数开启严格模式
要给某个函数开启严格模式，需要把 <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span> <span class="token punctuation">(</span>或<span class="token string">&#39;use strict&#39;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> 声明放在函数体所有语句之前。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="严格模式中的变化" tabindex="-1"><a class="header-anchor" href="#严格模式中的变化" aria-hidden="true">#</a> 严格模式中的变化</h4><ul><li>严格模式对 JavaScript的语法和行为，都做了一些改变。</li></ul><ol><li>变量规定 (1) 在正常模式中，如果一个变量没有声明就赋值，默认是全局变量。严格模式禁止这种用法，变量都必须先用 var 命令声明，然后再使用。 (2) 严禁删除已经声明的变量。列如，delete x; 语法是错误的</li><li>严格模式下 this 指向问题 (1) 以前在全局作用域函数中的 this 指向 window 对象。 (2) 严格模式下全局作用域中函数中的this 是 undefined (3) 以前构造函数时不加new也可以调用普通函数，this指向全局对象 (4) 严格模式下，如果 构造函数不加new调用，this 会报错. (5) new 实例化的构造函数指向创建的对象实例。 (6) 定时器 this 还是指向 window (7) 事件、对象还是指向调用者</li><li>函数变化 (1) 函数不能有重名的参数。 (2) 函数必须声明在顶级，新版本的 JavaScript会引入 “块级作用域” ( ES6 中已引入)。为了与新版本接轨，不允许在非函数的代码块内声明函数。 更多严格模式要求参考：<a href="https://developer.mozilla.org/zh-CN/docs/Web/javaScript/Reference/Strict_mode" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/zh-CN/docs/Web/javaScript/Reference/Strict_mode<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ol><hr><p>###正则表达式</p><h4 id="什么是正则表达式" tabindex="-1"><a class="header-anchor" href="#什么是正则表达式" aria-hidden="true">#</a> 什么是正则表达式</h4><ul><li>正则表达式(Regular Expression) 是用于匹配字符串中字符组合的模式。在 JavaScript中，正则表达式也是对象</li><li>正则表通常被用来检索、替换那些符合某个模式(规则)的文本，列如验证表单：用户名表单只能输入英文字母、数字或下划线， 昵称输入框中可以输入中文(匹配)。此外，正则表达式还常用于过滤掉网页内容中的一些敏感词(替换)，或从字符串中获取我们想要的特定部分(提取)等。</li><li>其他语言也会使用正则表达式，本阶段我主要是利用 JavaScript正则表达式完成表单验证</li></ul><h4 id="正则表达式的特点" tabindex="-1"><a class="header-anchor" href="#正则表达式的特点" aria-hidden="true">#</a> 正则表达式的特点</h4><ol><li>灵活性、逻辑性和功能性非常强</li><li>可以迅速地用极简单的方式达到字符串的复杂控制</li><li>对于刚接触的人来说 比较晦涩难懂 比如：^\w+([-+.]\w+)<em>@\w+([-.]w+)</em>.\w+([-.]\w+)*$</li><li>实际开发，一般都是直接复杂写好的正则表达式，但是要求会使用正则表达式并且根据实际情况修改正则表达式，比如用户名：/<sup class="footnote-ref"><a href="#footnote1">[1]</a><a class="footnote-anchor" id="footnote-ref1"></a></sup>{3,16}$/</li></ol><h4 id="创建正则表达式" tabindex="-1"><a class="header-anchor" href="#创建正则表达式" aria-hidden="true">#</a> 创建正则表达式</h4><p>在js中，与两种方式创建</p><ol><li><p>通过调用 RegExp 对象的构造函数创建</p><p><code>var 变量名 = new RegExp(/表达式/);</code></p></li><li><p>通过字面量创建</p><p><code>var 变量名 = /表达式/;</code></p></li></ol><p>####检测正则表达式test</p><p>test() 正则对象方法，用于检测字符串是否符合该规则，该对象会返回 true 或 false 其参数是测试字符串。</p><p><code>regexObj.test(str)</code></p><ol><li>regexObj 是写的正则表达式</li><li>str 我们要检测的文本</li><li>就是检测str 文本是否符合我们写的正则表达式规范</li></ol><p>####正则表达式的组成</p><ul><li>一个正则表达式可以由简单的字符构成，比如/abc/, 也可以是简单和特殊字符的组合，比如/ab*c/. 其中特殊字符也被称为元字符，在正则表达式中是具有特殊意义的专用符号，如^、$、+等</li><li>特殊字符非常多，可以参考： <ul><li>MDN</li><li>jQuery 手册</li><li>正式测试工具（菜鸟）</li></ul></li></ul><p>#####1.边界符</p><p>^ : 表示匹配行首的文本</p><p>$ : 表示匹配行尾的文本</p><p>如果^和$在一起，表示必须是精确匹配</p><h5 id="_2-字符类" tabindex="-1"><a class="header-anchor" href="#_2-字符类" aria-hidden="true">#</a> 2.字符类</h5><p>字符类表示有一系列字符可供选择，只要匹配其中一个就可以了。所有可供选择的字符都放在方括号[] 内。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// (1) [-] 方括号内部范围符-</span>

<span class="token comment">// (2) 字符组合</span>
<span class="token operator">/</span><span class="token operator">^</span><span class="token punctuation">[</span>a<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>$<span class="token operator">/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">)</span>      <span class="token comment">// true</span>

<span class="token comment">// (3) [^] 方括号内部 取反符^</span>
<span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[^abc]$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">)</span>        <span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>#####3.量词符</p><table><thead><tr><th style="text-align:center;">量词</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">*</td><td style="text-align:center;">重复零次或更多次</td></tr><tr><td style="text-align:center;">+</td><td style="text-align:center;">重复一次或更多次</td></tr><tr><td style="text-align:center;">?</td><td style="text-align:center;">重复零次或一次</td></tr><tr><td style="text-align:center;" n=""></td><td style="text-align:center;">重复n次</td></tr><tr><td style="text-align:center;" n,=""></td><td style="text-align:center;">重复n次或更多次</td></tr><tr><td style="text-align:center;" n,m=""></td><td style="text-align:center;">重复n到m次</td></tr></tbody></table><p>#####4.括号总结</p><p>(1) 大括号 量词符：里面表示重复次数 (2) 中括号 字符集合。匹配方括号中的任意字符 (3) 小括号 表示优先级</p><p>#####5.预定义类</p><table><thead><tr><th style="text-align:center;">预定义</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">\d</td><td style="text-align:center;">匹配0-9之间的任一数字，相当于 [0-9]</td></tr><tr><td style="text-align:center;">\D</td><td style="text-align:center;">匹配所有0-9以外的字符，相当于 [ ^0-9]</td></tr><tr><td style="text-align:center;">\w</td><td style="text-align:center;">匹配任意的字母、数字和下划线，相当于 [A-Za-z0-9_]</td></tr><tr><td style="text-align:center;">\W</td><td style="text-align:center;">除所有字母、数字和下划线以外的字符，相当于 [ ^A-Za-z0-9_]</td></tr><tr><td style="text-align:center;">\s</td><td style="text-align:center;">匹配空格 (包括换行符、制表符、空格符等)，相等于[\t\r\n\v\f]</td></tr><tr><td style="text-align:center;">\S</td><td style="text-align:center;">匹配非空格的字符，相当于 [ ^\t\r\n\v\f]</td></tr></tbody></table><p>####正则表达式中的替换</p><ol><li><p>replace 替换 replace() 方法可以实现替换字符串的操作，用来替换的参数可以是一个字符串或者一个正则表达式。 <code>stringObject.replace(regexp/substr,replacement)</code></p></li><li><p>正则表达式参数</p><p>/表达式/[switch]</p><p>switch(也称为修饰符)按照什么样的模式来匹配，有三种值：</p><p>(1). g：全局匹配</p><p>(2). i：忽略大小写</p><p>(3). gi：全局匹配+忽略大小写</p></li></ol><hr><h3 id="线程机制与事件机制" tabindex="-1"><a class="header-anchor" href="#线程机制与事件机制" aria-hidden="true">#</a> 线程机制与事件机制</h3><h4 id="进程与线程" tabindex="-1"><a class="header-anchor" href="#进程与线程" aria-hidden="true">#</a> 进程与线程</h4><img src="https://raw.githubusercontent.com/molimaMCc/Image/main/imgs/image-202107281154.png" alt="image-202107281154"><h4 id="进程" tabindex="-1"><a class="header-anchor" href="#进程" aria-hidden="true">#</a> 进程</h4><ol><li>程序的一次执行,它<code>占有一片独有的内存空间</code></li><li>可以通过windows任务管理器查看进程</li></ol><h4 id="线程" tabindex="-1"><a class="header-anchor" href="#线程" aria-hidden="true">#</a> 线程</h4><p>概念:</p><ul><li>是进程内的一个独立执行单元</li><li>是程序执行的一个完整流程</li><li>是CPU的最小的调度单元</li></ul><p><strong>进程与线程</strong></p><ol><li>应用程序必须运行在某个进程的某个线程上</li><li>一个进程中至少有一个运行的线程:主线程 --&gt;进程启动后自动创建</li><li>一个进程中也可以同时运行多个线程:此时我们会说这个程序是多线程运行的</li><li>多个进程之间的数据是不能直接共享的 --&gt;内存相互独立(隔离)</li><li><code>线程池(thread pool)</code>:保存多个线程对象的容器,实现线程对象的反复利用</li></ol><p><strong>引出的问题</strong></p><p><strong>① 何为多进程与多线程?</strong></p><p>多进程运行: 一应用程序可以同时启动多个实例运行</p><p>多线程: 在一个进程内, 同时有多个线程运行</p><p><strong>②比较单线程与多线程?</strong></p><p>多线程:</p><ul><li>优点:能有效提升CPU的利用率</li><li>缺点</li><li>创建多线程开销</li><li>线程间切换开销</li><li>死锁与状态同步问题</li></ul><p>单线程:</p><ul><li>优点:顺序编程简单易懂</li><li>缺点:效率低</li></ul><p><strong>③ JS是单线程还是多线程?</strong></p><p><strong>JS是单线程运行的 , 但使用H5中的 Web Workers可以多线程运行</strong></p><ul><li>只能由一个线程去操作DOM界面</li><li>具体原因可看下方<a href="https://gitee.com/hongjilin/hongs-study-notes/blob/master/%E7%BC%96%E7%A8%8B_%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/HTML+CSS+JS%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/JavaScript%E7%AC%94%E8%AE%B0/A_JavaScript%E8%BF%9B%E9%98%B6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.md#3%E3%80%81JS%E6%98%AF%E5%8D%95%E7%BA%BF%E7%A8%8B%E7%9A%84" target="_blank" rel="noopener noreferrer">3、JS是单线程的<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>部分给出的详解</li></ul><p><strong>④ 浏览器运行是单线程还是多线程?</strong></p><p>都是多线程运行的</p><p><strong>⑤ 浏览器运行是单进程还是多进程?</strong></p><p>有的是单进程:</p><ul><li>firefox</li><li>老版IE</li></ul><p>有的是多进程:</p><ul><li>chrome</li><li>新版IE</li></ul><p>如何查看浏览器是否是多进程运行的呢? 任务管理器--&gt;进程</p><h4 id="浏览器内核" tabindex="-1"><a class="header-anchor" href="#浏览器内核" aria-hidden="true">#</a> 浏览器内核</h4><ul><li>Chrome, Safari : webkit</li><li>firefox : Gecko</li><li>IE : Trident</li><li>360,搜狗等国内浏览器: Trident + webkit</li></ul><h5 id="内核由什么模块组成" tabindex="-1"><a class="header-anchor" href="#内核由什么模块组成" aria-hidden="true">#</a> 内核由什么模块组成?</h5><p>主线程</p><ol><li>js引擎模块 : 负责js程序的编译与运行</li><li>html,css文档解析模块 : 负责页面文本的解析(拆解)</li><li>dom/css模块 : 负责dom/css在内存中的相关处理</li><li>布局和渲染模块 : 负责页面的布局和效果的绘制</li><li>布局和渲染模块 : 负责页面的布局和效果的绘制</li></ol><p>分线程</p><ul><li>定时器模块 : 负责定时器的管理</li><li>网络请求模块 : 负责服务器请求(常规/Ajax)</li><li>事件响应模块 : 负责事件的管理</li></ul><p><img src="https://raw.githubusercontent.com/molimaMCc/Image/main/imgs/image-2021072823.png" alt="image-2021072823" loading="lazy"></p><h5 id="定时器引发的思考" tabindex="-1"><a class="header-anchor" href="#定时器引发的思考" aria-hidden="true">#</a> 定时器引发的思考</h5><ul><li>定时器并不能保证真正定时执行</li><li>一般会延迟一丁点(可以接受), 也有可能延迟很长时间(不能接受)</li></ul><h5 id="定时器回调函数是在分线程执行的吗" tabindex="-1"><a class="header-anchor" href="#定时器回调函数是在分线程执行的吗" aria-hidden="true">#</a> 定时器回调函数是在分线程执行的吗?</h5><p>在主线程执行的, JS是单线程的</p><h5 id="定时器是如何实现的" tabindex="-1"><a class="header-anchor" href="#定时器是如何实现的" aria-hidden="true">#</a> 定时器是如何实现的?</h5><p><code>事件循环模型</code>,在下方给出详解</p><h4 id="js是单线程的" tabindex="-1"><a class="header-anchor" href="#js是单线程的" aria-hidden="true">#</a> JS是单线程的</h4><h5 id="如何证明js执行是单线程的" tabindex="-1"><a class="header-anchor" href="#如何证明js执行是单线程的" aria-hidden="true">#</a> 如何证明JS执行是单线程的</h5><ul><li><code>setTimeout()的回调函数是在主线程执行的</code></li><li>定时器回调函数只有在运行栈中的代码全部执行完后才有可能执行</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 如何证明JS执行是单线程的</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//4. 在将[timeout 1111]弹窗关闭后,再等一秒 执行此处</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;timeout 2222&#39;</span><span class="token punctuation">)</span>
   <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;22222222&#39;</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
 <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//3. 过了一秒后 打印 timeout 1111并弹窗,此处如果不将弹窗关闭,不会继续执行上方222</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;timeout 1111&#39;</span><span class="token punctuation">)</span>
   <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;1111111&#39;</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
 <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//2. 然后打印timeout() 00000</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;timeout() 00000&#39;</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
 <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//1. fn()</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;fn()&#39;</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
 <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//----------------------</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;alert()之前&#39;</span><span class="token punctuation">)</span>
 <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;------&#39;</span><span class="token punctuation">)</span> <span class="token comment">//暂停当前主线程的执行, 同时暂停计时, 点击确定后, 恢复程序执行和计时</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;alert()之后&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>流程结果:</p><ol><li>先打印了[<code>fn()</code>],然后马上就打印了[<code>timeout() 00000</code>]</li><li>过了一秒后 打印 timeout 1111并弹窗,此处如果不将弹窗关闭,不会继续执行上方222</li><li>在将[timeout 1111]弹窗关闭后,<code>再等一秒</code> 执行此处</li></ol><ul><li>问:为何明明写的是2秒,却关闭上一个弹窗再过一秒就执行?</li><li>解:并不是关闭后再计算的,而是一起计算的,alert只是暂停了主线程执行</li></ul><h5 id="js引擎执行代码的基本流程与代码分类" tabindex="-1"><a class="header-anchor" href="#js引擎执行代码的基本流程与代码分类" aria-hidden="true">#</a> JS引擎执行代码的基本流程与代码分类</h5><p>代码分类:</p><ul><li>初始化代码</li><li>回调代码</li></ul><p>js引擎执行代码的基本流程</p><ol><li>先执行初始化代码: 包含一些特别的代码 回调函数(异步执行)</li></ol><ul><li>设置定时器</li><li>绑定事件监听</li><li>发送ajax请求</li></ul><ol start="2"><li>后面在某个时刻才会执行回调代码</li></ol><h5 id="为什么js要用单线程模式-而不用多线程模式" tabindex="-1"><a class="header-anchor" href="#为什么js要用单线程模式-而不用多线程模式" aria-hidden="true">#</a> 为什么js要用单线程模式, 而不用多线程模式?</h5><ol><li>JavaScript的单线程，与它的用途有关。</li><li>作为浏览器脚本语言，JavaScript的主要用途是与用户互动，以及操作DOM。</li><li>这决定了它只能是单线程，否则会带来很复杂的同步问题 <ul><li>举个栗子:如果我们要实现更新页面上一个dom节点然后删除,用单线程是没问题的</li><li>但是如果多线程,当我删除线程先删除了dom节点,更新线程要去更新的时候就会出错</li></ul></li></ol><h4 id="事件循环模型-event-loop-机制" tabindex="-1"><a class="header-anchor" href="#事件循环模型-event-loop-机制" aria-hidden="true">#</a> 事件循环模型(Event Loop)机制</h4><h5 id="概念引出" tabindex="-1"><a class="header-anchor" href="#概念引出" aria-hidden="true">#</a> 概念引出</h5><p>我们都知道，<code>javascript从诞生之日起就是一门单线程的非阻塞的脚本语言</code>。这是由其最初的用途来决定的：<code>与浏览器交互</code>。</p><p>单线程意味着，javascript代码在执行的任何时候，都只有一个主线程来处理所有的任务。</p><p><code>非阻塞</code>:</p><blockquote><p>而非阻塞则是当代码需要进行一项异步任务（无法立刻返回结果，需要花一定时间才能返回的任务，如I/O事件）的时候，主线程会挂起（pending）这个任务，然后在异步任务返回结果的时候再根据一定规则去执行相应的回调。</p></blockquote><p><code>单线程是必要的</code>:</p><blockquote><p>也是javascript这门语言的基石，原因之一在其最初也是最主要的执行环境——浏览器中，我们需要进行各种各样的dom操作。试想一下 如果javascript是多线程的，那么当两个线程同时对dom进行一项操作，例如一个向其添加事件，而另一个删除了这个dom，此时该如何处理呢？因此，为了保证不会 发生类似于这个例子中的情景，javascript选择只用一个主线程来执行代码，这样就保证了程序执行的一致性。</p></blockquote><p>当然，现如今人们也意识到，单线程在保证了执行顺序的同时也限制了javascript的效率，因此开发出了<code>web workers</code>技术。这项技术号称可以让javaScript成为一门多线程语言。</p><blockquote><p>然而，使用web workers技术开的多线程有着诸多限制，例如：<code>所有新线程都受主线程的完全控制，不能独立执行</code>。这意味着这些“线程” 实际上应属于主线程的子线程。另外，这些子线程并没有执行I/O操作的权限，只能为主线程分担一些诸如计算等任务。所以严格来讲这些线程并没有完整的功能，也因此这项技术并非改变了javascript语言的单线程本质。</p></blockquote><p>可以预见，未来的javascript也会一直是一门单线程的语言。</p><p>话说回来，前面提到javascript的另一个特点是“<code>非阻塞</code>”，那么javascript引擎到底是如何实现的这一点呢？</p><blockquote><p>答案就是——event loop（事件循环）。</p></blockquote><p><strong>注：<code>虽然nodejs中的也存在与传统浏览器环境下的相似的事件循环。然而两者间却有着诸多不同，故把两者分开，单独解释</code>。</strong></p><h5 id="浏览器环境下js引擎的事件循环机制" tabindex="-1"><a class="header-anchor" href="#浏览器环境下js引擎的事件循环机制" aria-hidden="true">#</a> 浏览器环境下JS引擎的事件循环机制</h5><p><strong>执行栈概念</strong></p><p>执行上下文栈详情可以看上方笔记 --&gt;<a href="https://gitee.com/hongjilin/hongs-study-notes/blob/master/%E7%BC%96%E7%A8%8B_%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/HTML+CSS+JS%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/JavaScript%E7%AC%94%E8%AE%B0/A_JavaScript%E8%BF%9B%E9%98%B6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.md#2%E3%80%81%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E4%B8%8E%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E6%A0%88" target="_blank" rel="noopener noreferrer">函数高级的2、执行上下文与执行上下文栈<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,此处继续进行一次概述加深理解</p><p>当javascript代码执行的时候会将不同的变量存于内存中的不同位置：<code>堆（heap）</code>和<code>栈（stack）</code>中来加以区分。其中，堆里存放着一些对象。而栈中则存放着一些基础类型变量以及对象的指针。 <code>但是我们这里说的执行栈和上面这个栈的意义却有些不同</code>。</p><p><code>执行栈</code>:</p><blockquote><p>当我们调用一个方法的时候，js会生成一个与这个方法对应的执行环境（context），又叫<code>执行上下文</code>。这个执行环境中存在着这个方法的私有作用域、上层作用域的指向、方法的参数，这个作用域中定义的变量以及这个作用域的this对象。 而当一系列方法被依次调用的时候，因为js是单线程的，同一时间只能执行一个方法，于是这些方法被排队在一个单独的地方。这个地方被称为执行栈。</p></blockquote><p>当一个脚本第一次执行的时候，js引擎会解析这段代码，并将其中的同步代码按照执行顺序加入执行栈中，然后从头开始执行。如果当前执行的是一个方法，那么js会向执行栈中添加这个方法的执行环境，然后进入这个执行环境继续执行其中的代码。<code>当这个执行环境中的代码 执行完毕并返回结果后，js会退出这个执行环境并把这个执行环境销毁，回到上一个方法的执行环境</code>。这个过程反复进行，直到执行栈中的代码全部执行完毕。</p><p><strong>事件队列（Task Queue）</strong></p><p>JS引擎遇到一个异步事件后并不会一直等待其返回结果，而是会将这个事件挂起，继续执行执行栈中的其他任务,当一个异步事件返回结果后，js会将这个事件加入与当前执行栈不同的另一个队列，我们称之为<code>事件队列</code>。</p><blockquote><p>被放入事件队列不会立刻执行其回调，而是<code>等待当前执行栈中的所有任务都执行完毕， 主线程处于闲置状态时，主线程会去查找事件队列是否有任务</code>。如果有，那么主线程会从中取出排在第一位的事件，并把这个事件对应的回调放入执行栈中，然后执行其中的同步代码...，如此反复，<code>这样就形成了一个无限的循环。这就是这个过程被称为“事件循环（Event Loop）”的原因。</code></p></blockquote><p>这里还有一张图来展示这个过程:</p><p><img src="https://raw.githubusercontent.com/molimaMCc/Image/main/imgs/image-20210840.png" alt="image-20210840" loading="lazy"></p><p>图中的stack表示我们所说的执行栈，web apis则是代表一些异步事件，而callback queue即事件队列。</p><p>以上的事件循环过程是一个宏观的表述，实际上因为异步任务之间并不相同，因此他们的执行优先级也有区别。<code>不同的异步任务被分为两类：微任务（micro task）和宏任务（macro task）</code>,此部分看下方详解</p><h5 id="宏任务-macro-task-与微任务-micro-task" tabindex="-1"><a class="header-anchor" href="#宏任务-macro-task-与微任务-micro-task" aria-hidden="true">#</a> 宏任务(<strong>macro task</strong>)与微任务(<strong>micro task</strong>)</h5><p>顾名思义,宏任务放至宏任务队列(<code>简称宏队列</code>)中、微任务放至微任务队列(<code>简称微队列</code>)中</p><ol><li>JS中用来存储待执行回调函数的队列包含2个不同特定的列队</li></ol><ul><li><code>宏队列</code>:用来保存待执行的宏任务(回调),比如:<code>定时器</code>回调/ajax回调/dom事件回调</li><li><code>微队列</code>:用来保存待执行的微任务(回调),比如:<code>Promise</code>的回调/muntation回调</li></ul><ol><li>JS执行时会区别这2个队列: <ul><li>JS执行引擎首先必须执行所有的<code>初始化同步任务</code>代码</li><li>每次准备取出第一个<code>宏任务执行前</code>,都要将所有的<code>微任务</code>一个一个取出来执行</li></ul></li></ol><p>前面我们介绍过，在一个事件循环中，异步事件返回结果后会被放到一个任务队列中。然而，根据这个异步事件的类型，这个事件实际上会被对应的宏任务队列或者微任务队列中去。并且在当前执行栈为空的时候，主线程会 查看微任务队列是否有事件存在。如果不存在，那么再去宏任务队列中取出一个事件并把对应的回到加入当前执行栈；如果存在，则会依次执行队列中事件对应的回调，直到微任务队列为空，然后去宏任务队列中取出最前面的一个事件，把对应的回调加入当前执行栈...如此反复，进入循环。</p><p>我们只需记住:** <code>当前执行栈执行完毕时会立刻先处理所有微任务队列中的事件，然后再去宏任务队列中取出一个事件。同一次事件循环中，微任务永远在宏任务之前执行</code> **</p><p><img src="https://raw.githubusercontent.com/molimaMCc/Image/main/imgs/imge-2341841734.png" alt="imge-2341841734" loading="lazy"></p><p><strong>代码逆向理解宏任务与微任务</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;timeout callback1（）&#39;</span><span class="token punctuation">)</span><span class="token comment">//立即放入宏队列</span>
      Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
        <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Promise onResolved3()&#39;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token comment">//当这个宏任务执行后 立马放入微队列,所以这个微任务执行完后下个宏任务才能执行 </span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;timeout callback2（）&#39;</span><span class="token punctuation">)</span> <span class="token comment">//立即放入宏队列,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
      <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Promise onResolved1()&#39;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token comment">//立即放入微队列</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;timeout callback3（）&#39;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token comment">//立即放入宏任务</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>

    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
      <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Promise onResolved2()&#39;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token comment">//立即放入微队列</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;同步代码&#39;</span><span class="token punctuation">)</span> <span class="token comment">//同步代码立即执行</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>结果</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token string">&#39;同步代码&#39;</span><span class="token punctuation">,</span>
  <span class="token string">&#39;Promise onResolved1()&#39;</span><span class="token punctuation">,</span>
  <span class="token string">&#39;Promise onResolved2()&#39;</span><span class="token punctuation">,</span>
  <span class="token string">&#39;timeout callback1（）&#39;</span><span class="token punctuation">,</span>
  <span class="token string">&#39;Promise onResolved3()&#39;</span><span class="token punctuation">,</span>
  <span class="token string">&#39;timeout callback2（）&#39;</span><span class="token punctuation">,</span>
  <span class="token string">&#39;timeout callback3（）&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="web-workers" tabindex="-1"><a class="header-anchor" href="#web-workers" aria-hidden="true">#</a> Web Workers</h3><p>想了解更多可以点击链接查看更多,此处只是大致了解学习 --&gt;<a href="https://gitee.com/link?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FWeb_Workers_API%2FUsing_web_workers" target="_blank" rel="noopener noreferrer">Web Workers<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ol><li>H5规范提供了js分线程的实现, 取名为: Web Workers</li><li>相关API</li></ol><ul><li>Worker: 构造函数, 加载分线程执行的js文件</li><li>Worker.prototype.onmessage: 用于接收另一个线程的回调函数</li><li>Worker.prototype.postMessage: 向另一个线程发送消息</li></ul><ol><li>不足</li></ol><ul><li>worker内代码不能操作DOM(更新UI)</li><li>不能跨域加载JS</li><li>不是每个浏览器都支持这个新特性</li></ul><p><strong>示例</strong></p><p>还是拿斐波那契（Fibonacci）数列来做例子,这东西效率低,可以拿来模拟</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;数值&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;number&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;btn&quot;</span><span class="token operator">&gt;</span>计算<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
 <span class="token comment">// 1 1 2 3 5 8    f(n) = f(n-1) + f(n-2)</span>
 <span class="token keyword">function</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> n<span class="token operator">&lt;=</span><span class="token number">2</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment">//递归调用</span>
 <span class="token punctuation">}</span>
 <span class="token comment">// console.log(fibonacci(7))</span>
 <span class="token keyword">var</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;number&#39;</span><span class="token punctuation">)</span>
 document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;btn&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">var</span> number <span class="token operator">=</span> input<span class="token punctuation">.</span>value
   <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
   <span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当我运行此行代码,传入计算数值为50左右(有的甚至更低),整个页面就会卡住好久的时间不能操作(计算结束后才会弹窗,但是未弹窗的这段时间用户并不能进行操作),这时候就会发现单线程的弊端了</p><p><strong>尝试使用</strong></p><ol><li>H5规范提供了js分线程的实现, 取名为: Web Workers</li><li>相关API</li></ol><ul><li>Worker: 构造函数, 加载分线程执行的js文件</li><li>Worker.prototype.onmessage: 用于接收另一个线程的回调函数</li><li>Worker.prototype.postMessage: 向另一个线程发送消息</li></ul><ol><li>不足</li></ol><ul><li>worker内代码不能操作DOM(更新UI)</li><li>不能跨域加载JS</li><li>不是每个浏览器都支持这个新特性</li></ul><p><strong>主线程</strong></p><ol><li>创建一个Worker对象</li><li>绑定[主线程接收分线程返回的数据]方法</li><li>主线程向分线程发送数据,然后等待接受数据</li><li>接收到分线程回馈的数据,将数据进行处理(如弹窗)</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;数值&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;number&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;btn&quot;</span><span class="token operator">&gt;</span>计算<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
 <span class="token keyword">var</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;number&#39;</span><span class="token punctuation">)</span>
 document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;btn&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">var</span> number <span class="token operator">=</span> input<span class="token punctuation">.</span>value

   <span class="token comment">//创建一个Worker对象</span>
   <span class="token keyword">var</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">&#39;worker.js&#39;</span><span class="token punctuation">)</span>
   <span class="token comment">// 绑定接收消息的监听</span>
   worker<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//此处变成回调代码,会在初始化工作完成后才会进行</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;主线程接收分线程返回的数据: &#39;</span><span class="token operator">+</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
     <span class="token function">alert</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>

   <span class="token comment">// 向分线程发送消息</span>
   worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;主线程向分线程发送数据: &#39;</span><span class="token operator">+</span>number<span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
 <span class="token comment">// console.log(this) // window</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>分线程</strong></p><p>将计算放置分线程中</p><p><code>注意</code>:alert(result) alert是window的方法, 在分线程不能调用,<code>分线程中的全局对象不再是window</code>, 所以在分线程中不可能更新界面</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//worker.js</span>
<span class="token keyword">function</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> n<span class="token operator">&lt;=</span><span class="token number">2</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment">//递归调用</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">var</span> number <span class="token operator">=</span> event<span class="token punctuation">.</span>data
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;分线程接收到主线程发送的数据: &#39;</span><span class="token operator">+</span>number<span class="token punctuation">)</span>
 <span class="token comment">//计算</span>
 <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
 <span class="token function">postMessage</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;分线程向主线程返回数据: &#39;</span><span class="token operator">+</span>result<span class="token punctuation">)</span>
 <span class="token comment">// alert(result)  alert是window的方法, 在分线程不能调用</span>
 <span class="token comment">// 分线程中的全局对象不再是window, 所以在分线程中不可能更新界面</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://raw.githubusercontent.com/molimaMCc/Image/main/imgs/image-202107295339.png" alt="image-202107295339" loading="lazy"></p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="footnote1" class="footnote-item"><p>a-z0-9_- <a href="#footnote-ref1" class="footnote-backref">↩︎</a></p></li></ol></section></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/docs/pages/JavaScript/JavaScriptBase.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><!----><!----></footer><nav class="page-nav"><a href="/MyBlog/pages/JavaScript/DOM%E4%B8%8EBOM.html" class="nav-link prev" aria-label="Web APIs"><div class="hint"><span class="arrow left"></span>上一页</div><div class="link"><!---->Web APIs</div></a><a href="/MyBlog/pages/JavaScript/ES6.html" class="nav-link next" aria-label="ES6-ES11"><div class="hint">下一页<span class="arrow right"></span></div><div class="link">ES6-ES11<!----></div></a></nav><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">默认页脚</div><div class="copyright">Copyright © 2022 MolimaMCc</div></footer><!--]--></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/MyBlog/assets/app.965a661c.js" defer></script>
  </body>
</html>
